{"version":3,"sources":["react.js","api.js","components/pages/LoginPage.jsx","components/Page.jsx","components/Grid.jsx","components/Flatpickr.jsx","components/Field.jsx","components/GridEditor.jsx","components/GridCheckbox.jsx","components/Tree.jsx","components/pages/TreePage.jsx","components/Form.jsx","components/Header.jsx","components/Button.jsx","components/Sheet.jsx","components/Group.jsx","components/Footer.jsx","components/pages/FormPage.jsx","components/pages/CustomPage.jsx","components/pages/HomePage.jsx","components/pages/AboutPage.jsx","components/pages/NotFound.jsx","components/pages/PanelLeft.jsx","components/pages/PanelRight.jsx","routes.js","components/App.jsx","index.js","react-dom.js"],"names":["window","React","Error","module","exports","href","PouchDB","plugin","PouchFind","RelationalPouch","require","default","session_db","rapyd_config","localStorage","rapyd_server_url","url","location","protocol","origin","pathname","substring","lastIndexOf","globals","preload","root","document","getElementById","object","done","value","preload_count","preload_loader","remove","preload_backdrop","preloader","createElement","className","insertAdjacentHTML","backdrop","insertAdjacentElement","_callee","session_object","new_session","regenerator_default","a","wrap","_context","prev","next","models","abrupt","tools","local_db","get","sent","login","password","encrypted","client_js_time","logout","reload","client_js","t0","console","log","ORM","t1","stop","_callee2","session","_context2","put","Object","objectSpread","_callee3","args","_context3","compress","ajax","status","checkBase64","LZMA","decompress","decodeBuffer","_rev","unsaved","_id","_callee4","_context4","destroy","wait_exist","fn","Promise","resolve","reject","interval","setInterval","clearInterval","_callee5","script","URL","blob","BlobBuilder","_context5","webkitURL","Blob","error","WebKitBlobBuilder","MozBlobBuilder","append","getBlob","type","src","createObjectURL","body","appendChild","configuration","assign","env","context","user","browse","id","create_data","ajax_load","options","no_preload","ajax_resolve","xhr","response","ajax_reject","exceptionCount","exception","keys","exceptions","find","constructor","app","dialog","alert","message","warningCount","warning","offline","arguments","length","undefined","warn","toast","create","text","closeButton","closeTimeout","open","dataType","data","parseURI","XMLHttpRequest","onload","this","onerror","statusText","setRequestHeader","responseType","send","array","key","JSON","stringify","push","encodeURIComponent","join","string","btoa","atob","Uint8Array","i","charCodeAt","api","get_session","update_session","wait","ms","setTimeout","handleClientError","values","readAsDataURL","file","load","reader","FileReader","event","target","result","then","catch","hasValue","Array","String","indexOf","toString","hasKey","_default","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","username","_iterator","querySelectorAll","Symbol","iterator","_iteratorNormalCompletion","_step","addEventListener","clickEvent","bind","choose_database","databases","setState","_this2","react_default","framework7_react_esm","noToolbar","noNavbar","noSwipeback","loginScreen","form","required","label","onInput","e","database","disabled","selected","map","style","color","placeholder","autofocus","onClick","signIn","float","marginLeft","setUrl","marginRight","preventDefault","keyCode","$f7","prompt","input","querySelector","self","success","Component","Page","backLink","active_url","popup","iconMd","panelOpen","title","popupClose","children","height","main","rowSelection","paginationPageSize","pagination","enableColResize","enableServerSideSorting","enableServerSideFilter","suppressMultiSort","suppressRowClickSelection","onGridReady","onRowClicked","onSelectionChanged","onPaginationChanged","onSortChanged","onFilterChanged","columnDefs","rowData","frameworkComponents","singleClickEdit","flatpickr_count","count","inline","flatpickr","customInput","_flatpickr","clone","customComponent","refs","cloneNode","onChange","readOnly","_ref","asyncToGenerator","mark","defaultDate","t2","t4","t5","t3","setDate","clear","_x","apply","allowKeyboard","_onChange2","_x2","componentDidMount","_ref2","_this3","_x3","set","_ref3","_x4","date","selectedDateObj","ref","display","singleSelectInput","Templates","replace","singleSelectedItem","multipleSelectedItem","altvalue","onchange_running","active_error","field_map","name","input_type","split","cellEdit","active_id","refresh","_wait_promise","model","field","_fields","setInputValue","setSelectivityValue","widget","date_input","base","exist","selectivity","lastSelectivity","relation","records","_rec_name","from","__iter__","record","selections","selection","dict","active_model","checked","_pending_promises","ref_object","loaded","types","char","integer","boolean","binary","active_lines","tree","parent_model","tree_field","rowIndex","_original_object_for_id","invisible","Function","readonly","component","first","copy","reverse","visible","filter","overflow","raised","items","minimumInputLength","params","fetch","_x5","_x6","_fetch","after_create","assign_record","editing","write","views","router","back","_name","icon_create","errorMessageForce","errorMessage","selectivity_react","slot","multiple","setValue","onDropdownOpen","selectivityOpened","onDropdownClose","onSelect","allowClear","closeOnSelect","navigate","active_task","top","left","Flatpickr_default","enableTime","enableSeconds","files","_callee6","_context6","zIndex","_callee7","init","query","_models$env$field$rel","limit","domain","inverse_field","results","_didIteratorError","_iteratorError","_context7","active_limit","active_index","offset","toConsumableArray","with_context","search","term","concat","add","toLowerCase","more","Math","random","substr","temp_records","return","finish","_search_count","getData","colDef","column","cellEditorFramework","temp_ids","getValue","isArray","temp_id","slice","update","err","specialValue","oldValue","newValue","stopEditing","Field_default","GridCheckbox","autoSizeAll","gridOptions","listener","gridCore","getFilterInstance","eClearButton","div","eGridDiv","prototype","element","offsetWidth","scrollWidth","sizeColumnsToFit","width","parseFloat","parentElement","innerHTML","allColumnIds","popups","maxWidth","popupWidth","columnApi","getAllColumns","forEach","colId","autoSizeColumns","max","offsetParent","contains","Infinity","Tree","this_tree","assertThisInitialized","isEditable","isTreeView","editable","node","pendingTask","tasked","pendingCreate","pendingWrite","taskJob","new_records","defineProperty","ids","selectedOnchange","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","row","deselectAll","cellEditorParams","refreshCells","_this4","getSelectedRows","paginationGetCurrentPage","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","pagingCalled","active_ids","handleOutside","grid","fields","child","index","headerName","attributes","suppressMovable","filterParams","applyButton","clearButton","newRowsAction","onCellValueChanged","sort","default_sort","GridEditor","cellRendererParams","cellClass","cellRendererFramework","checkboxSelection","headerCheckboxSelection","parseInt","specialEditor","innerWidth","lastWidth","_this5","onclick","paging","newData","forceUpdate","removeEventListener","resizeListener","isPopup","rows","default_row","pushed","unshift","active_sort","paginationGoToFirstPage","forcePopup","conditions","operator","condition1","condition2","startsWith","endsWith","notContains","equals","notEqual","condition","result_ids","pagingStarted","getElementsByClassName","view_model","deleting","page_domain","view","currentRoute","parse","field_name","active_args","current_args","last_args","_models$env$this$stat","_window$tools","_this6","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","apply_domain","_records2","sort_by","read","paginate","t7","treeView","updateRowData","popup_modal","getDOMNode","selected_ids","many2many","active_field","active_field_name","parent_tree","unlink","splice","_values","FileSaver","saveAs","csv","serialize","innerText","_this7","choose","min","position","Grid_default","getSortModel","getFilterModel","addItem","backgroundColor","chooseItem","selectItem","exportItem","actions","entries","_ref4","slicedToArray","function_name","removeItem","animate","DOMParser","parseFromString","tree_arch","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","attribute","fill","customComponents","Field","function_string","cachedViews","render","f7route","mode","setAttribute","recurse","elements","parent_props","components","_loop","tagName","toUpperCase","_i","_arr","Boolean","parseView","custom_init","isCustomView","edit_function","edit","operation","RequiredError","task","hash","reloadCurrent","promises","all","old_record","buttonStyle","margin-right","uploadStyle","margin","boxShadow","borderRight","upload","Header","minHeight","button","marginTop","flex-wrap","previousTitle","group","previousElementSibling","nextElementSibling","offsetLeft","padding","fontSize","lineHeight","rapydComponents","Form","Button","Sheet","Group","Footer","afterMount","componentDidUpdate","word","inverse","outerHTML","TreePage","active_mode","view_id","contexts","HomePage","LoginPage_default","home_view","TreePage_default","FormPage_default","CustomPage_default","strong","link","popupOpen","loginScreenOpen","AboutPage","NotFound","hide","hidePanel","panel","leftBreakpoint","initBreakpoints","PanelLeft","fontWeight","panelClose","menu","as_array","childs","close","currentTarget","data-view","child_menu","InstallPromp","userChoice","InstallPrompt","iconSize","material","tabbar","tabLink","tabLinkActive","tabActive","paddingTop","mediaList","after","device","ios","content","routes","path","PanelRight","FormPage","CustomPage","App","manifest","short_name","app_name","long_name","description","app_description","scope","start_url","background_color","icons","icon_big","sizes","icon_small","manifestRegistered","registerManifest","validManifest","json","theme_color","f7params","theme","swipe","swipeThreshold","colorTheme","color_theme","reveal","right","cover","preloadPreviousPage","pushState","OfflinePluginRuntime","onInstalled","onUpdateReady","confirm","Framework7","use","Framework7React","ReactDOM","Framework7Components","Flatpickr","wait_session","color_element","custom_navbar","getComputedStyle","c","hex"],"mappings":"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","file":"static/js/main.8ece5aff.chunk.js","sourcesContent":["if (!window.React) {\n  throw Error('React must be defined on global variable');\n}\n\nmodule.exports = window.React;\n","import PouchDB from 'pouchdb-browser';\nimport PouchFind from 'pouchdb-find';\n//import PouchSearch from 'pouchdb-quick-search';\nimport RelationalPouch from 'relational-pouch';\n\nPouchDB.plugin(PouchFind);\n//PouchDB.plugin(PouchSearch);\nPouchDB.plugin(RelationalPouch);\nPouchDB.plugin(require('pouchdb-debug').default);\nwindow.PouchDB = PouchDB;\nwindow.session_db = new PouchDB('session');\n\nif (!window.rapyd_config) window.rapyd_config = {};\n\nif (!window.localStorage.rapyd_server_url) {\n  if (window.rapyd_config.url) {\n    window.localStorage.rapyd_server_url = window.rapyd_config.url;\n  }\n  else if (window.location.protocol === 'file:') {\n    window.localStorage.rapyd_server_url = 'http://localhost:8069';\n  }\n  else {\n    window.localStorage.rapyd_server_url = ((href) => href.substring(0, href.lastIndexOf('/')) + '/')(window.location.origin + window.location.pathname);\n  }\n}\n\nconst globals = {};\n\nfunction preload() {\n  const root = document.getElementById('app');\n  if (root) {\n    const object = {done: (value) => {\n      globals.preload_count -= 1;\n      if (globals.preload_count != 0) return value;\n      else delete globals.preload_count;\n      globals.preload_loader.remove();\n      globals.preload_backdrop.remove();\n      return value;\n    }};\n    if (!globals.preload_count) {\n      globals.preload_count = 1;\n    }\n    else {\n      globals.preload_count += 1;\n      return object;\n    }\n    const preloader = document.createElement('div');\n    preloader.className = 'preloader-modal';\n    preloader.insertAdjacentHTML('beforeend',`\n    <div class=\"preloader color-white\">\n      <span class=\"preloader-inner\">\n        <span class=\"preloader-inner-gap\"></span>\n        <span class=\"preloader-inner-left\">\n          <span class=\"preloader-inner-half-circle\"></span>\n        </span>\n        <span class=\"preloader-inner-right\">\n          <span class=\"preloader-inner-half-circle\"></span>\n        </span>\n      </span>\n    </div>`);\n    const backdrop = document.createElement('div');\n    backdrop.className = 'preloader-backdrop';\n    root.insertAdjacentElement('beforeend', backdrop);\n    root.insertAdjacentElement('beforeend', preloader);\n    globals.preload_loader = preloader;\n    globals.preload_backdrop = backdrop;\n    return object;\n  }\n}\n\nasync function get_session() {\n  const session_db = window.session_db;\n  if (window.models) {\n    return {models: window.models, tools: window.tools, local_db: window.local_db};\n  }\n  try {\n    let session_object = await session_db.get('session');\n    try {\n      const new_session = await login({login: session_object.login, password: session_object.password, encrypted: true, client_js_time: session_object.client_js_time});\n      if (!new_session) {\n        await logout();\n        window.location.reload();\n      }\n      else if (!new_session.client_js) {\n        new_session.client_js = session_object.client_js;\n      }\n      session_object = new_session;\n    }\n    catch(error) {\n      console.log(error);\n    }\n    await ORM(session_object);\n    return {models: window.models, tools: window.tools, local_db: window.local_db};\n  }\n  catch(error) {\n    console.log(error);\n    return {};\n  }\n}\n\nasync function update_session(new_session) {\n  const session = await window.session_db.get('session');\n  return await window.session_db.put({...session, ...new_session});\n}\n\nasync function login(args) {\n  args.encrypted = args.encrypted ? true: false;\n  /*if (!document.documentMode && !/Edge/.test(navigator.userAgent)) */args.compress = true;\n  const session = await ajax('post', 'json', window.localStorage.rapyd_server_url + '/api/login', args);\n  if (session.status === 'denied') {\n    return false;\n  }\n  else if (session.status === 'error') {\n    throw Error(\"There are an error on the server\");\n  }\n  if (args.compress && checkBase64(session.client_js)) session.client_js = require('lzma/src/lzma-d').LZMA.decompress(decodeBuffer(session.client_js));\n  console.log(session);\n  try {\n    const session_object = await window.session_db.get('session');\n    session._rev = session_object._rev;\n    session.unsaved = session_object.unsaved;\n    session.client_js = session.client_js || session_object.client_js\n    session.client_js_time = session.client_js_time || session_object.client_js_time\n  }\n  catch(error) {\n    session.unsaved = {};\n  }\n  session._id = 'session';\n  await window.session_db.put(session);\n  return session;\n}\n\nasync function logout() {\n  try {\n    const session = await window.session_db.get('session');\n    await window.session_db.remove(session);\n  }\n  catch(error) {\n    console.log(error);\n  }\n  window.local_db.destroy();\n  return window.location.reload();\n}\n\nfunction wait(ms) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => resolve(), ms);\n  });\n}\n\nfunction wait_exist(fn) {\n  return new Promise((resolve, reject) => {\n    const clear = (id) => {\n      clearInterval(id);\n      resolve();\n    }\n    const interval = setInterval(() => {if (fn()) clear(interval)}, 0);\n  });\n}\n\nasync function ORM(session) {\n  //window.localStorage.rapyd_server_url = session.url;\n  // eslint-disable-next-line\n  //new Function(session.client_js)();\n  const script = document.createElement('script');\n  const URL = window.URL || window.webkitURL;\n  let blob;\n  try {\n    blob = new Blob([session.client_js]);\n  }\n  catch(error) {\n    const BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n    blob = BlobBuilder();\n    blob.append(session.client_js);\n    blob = blob.getBlob();\n  }\n  script.type = 'text/javascript';\n  script.src = URL.createObjectURL(blob);\n  /*script.text = '//<![CDATA[\\n';\n  script.text += session.client_js;\n  script.text += '\\n//]]>';*/\n  document.body.appendChild(script);\n  await wait_exist(() => window.models);\n  const tools = window.tools;\n  tools.configuration = Object.assign(tools.configuration, window.rapyd_config);\n  tools.configuration.url = window.localStorage.rapyd_server_url;\n  const models = window.models;\n  models.env.context.unsaved = session.unsaved || {};\n  models.env.user = models.env['res.users'].browse();\n  models.env.user.id = session.id;\n  models.env.user.login = session.login;\n  models.env.user.password = session.password;\n  await tools.create_data();\n  console.log(session)\n  /*for (let model in tools.view) {\n    const views = tools.view[model];\n    for (let mode in views) {\n      if (hasValue(['id', 'string', 'custom_init'], mode)) {\n        continue;\n      }\n      views[mode] = views[mode].replace(/([a-z]*-[a-z]*[/>\\s])|([a-z]*[/>\\s])/g, (string) => string.split('-').map((word) => word.slice(0, 1).toUpperCase() + word.slice(1)).join('')).replace(/>\\s+|\\s+</g, (s) => s.trim());\n    }\n  }*/\n  tools.configuration.ajax_load = (options) => {if (!options.no_preload) options.preload = preload()};\n  tools.configuration.ajax_resolve = (resolve, xhr, options) => {\n    if (!options.no_preload) options.preload.done();\n    resolve(xhr.response);\n  }\n  tools.configuration.ajax_reject = (reject, xhr, options) => {\n    if (!options.no_preload) options.preload.done();\n    reject(xhr);\n  }\n  globals.exceptionCount = 0;\n  tools.configuration.exception = (error) => {\n    /*if (globals.exceptionCount !== 0) return new Promise((resolve) => {\n      globals.exceptionCount = 0;\n      resolve(true);\n      throw error;\n    });*/\n    globals.exceptionCount += 1;\n    if (error && Object.keys(window.tools.exceptions).find((exception) => exception === error.type || window.tools.exceptions[exception] === error.constructor)) {\n      if (error.type !== 'ServerError') globals.app.dialog.alert(error.message);\n      else globals.app.dialog.alert('There are some error');\n      throw new Error(error.message);\n    }\n    else globals.app.dialog.alert('Network Error');\n    throw error;\n  }\n  globals.warningCount = 0;\n  tools.configuration.warning = (error, offline=false) => {\n    if (globals.warningCount !== 0) return new Promise((resolve) => {\n      globals.warningCount = 0;\n      resolve(true);\n      console.warn(error);\n    });\n    if (offline) globals.app.toast.create({text: 'You are offline, using local data', closeButton: true, closeTimeout: 1000}).open();\n    globals.warningCount += 1;\n    console.warn(error);\n  }\n}\n\nfunction handleClientError(error) {\n  if (error && Object.values(window.tools.exceptions).find((exception) => exception === error.constructor)) window.tools.configuration.exception(error);\n  else throw error;\n}\n\nfunction ajax(type, dataType, url, data) {\n  if (data !== undefined || null || false) {\n    data = parseURI(data);\n  }\n  return new Promise(function(resolve, reject) {\n    const xhr = new XMLHttpRequest();\n    xhr.open(type, url, true);\n    xhr.onload = function() {\n      resolve(this.response);\n    };\n    xhr.onerror = function() {\n      reject(this.statusText);\n    };\n    if (dataType === undefined) {\n      dataType = 'json';\n    }\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    xhr.responseType = dataType;\n    try {\n      xhr.send(data);\n    }\n    catch(error) {\n      reject(error);\n    }\n  });\n}\n\nfunction parseURI(data) {\n  const array = [];\n  for (let key in data) {\n    let value = data[key];\n    if (typeof value === 'object') {\n      value = JSON.stringify(value);\n    }\n    else if (value === '') {\n      value = null;\n    }\n    array.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\n  }\n  return array.join('&');\n}\n\nfunction readAsDataURL(file) {\n  const load = preload();\n  return new Promise((resolve, reject) => {\n    if (!file) reject(new Error('No file available'));\n    const reader = new FileReader();\n    reader.onload = (event) => resolve(event.target.result);\n    reader.readAsDataURL(file);\n  }).then(load.done).catch((error) => {\n    load.done();\n    throw error;\n  });\n}\n\nfunction hasKey(object, key) {\n  if (object === undefined || object === null || object === false) {\n    return false;\n  }\n  return Object.keys(object).indexOf(key) > -1;\n}\n\nfunction hasValue(object, value) {\n  if (object === undefined || object === null || object === false) {\n    return false;\n  }\n  if ([Array, String].indexOf(object.constructor) < 0) {\n    object = object.toString();\n  }\n  return object.indexOf(value) > -1;\n}\n\n\nfunction checkBase64(string) {\n  try {\n   return window.btoa(window.atob(string)) === string;\n  }\n  catch(error) {\n   return false;\n  }\n}\n\nfunction decodeBuffer(string) {\n  string = window.atob(string);\n  let array = new Uint8Array(string.length);\n  for (let i = 0; i < string.length; i++) {\n    array[i] = string.charCodeAt(i);\n  }\n  return array //new Int8Array(array.buffer);\n}\n\n/*function query(db, type, args) {\n  const makeDocID = db.rel.makeDocID;\n  const selectors = [{_id: {$gt: makeDocID({type}), $lt: makeDocID({type, id: {}})}}];\n  const promises = [];\n  let index = 1;\n  for (let arg of args) {\n    let need_orm;\n    if (!arg || !arg[0] || !arg[0].length) continue;\n    selectors[index] = {};\n    if (arg[0] === 'id') {\n      selectors[index]._id = {};\n      if (Array.isArray(arg[2])) arg[2] = arg[2].map((id) => makeDocID({type, id}));\n      else arg[2] = makeDocID({type, id: arg[2]})\n      arg[0] = '_id';\n    }\n    else arg[0] = 'data.' + arg[0];\n    if (!selectors[index][arg[0]]) selectors[index][arg[0]] = {};\n    if (arg[1] === '=') {\n      if (arg[2] != false) selectors[index][arg[0]]['$eq'] =  arg[2];\n      else selectors[index][arg[0]]['$lte'] = false;\n    }\n    else if (arg[1] === '!=') {\n      if (arg[2] != false) {\n        need_orm = true;\n        promises.push(db.find({selector: {[arg[0]]: {$gt: arg[2]}}, fields: ['_id']}));\n        promises.push(db.find({selector: {[arg[0]]: {$lt: arg[2]}}, fields: ['_id']}));\n      }\n      else selectors[index][arg[0]]['$gt'] = false;\n    }\n    else if (arg[1] === '>') selectors[index][arg[0]]['$gt'] = typeof arg[2] === 'number' ? (arg[2] + 0.000000000000001) : arg[2];\n    else if (arg[1] === '>=') selectors[index][arg[0]]['$gte'] = arg[2];\n    else if (arg[1] === '<') selectors[index][arg[0]]['$lt'] = arg[2];\n    else if (arg[1] === '<=') selectors[index][arg[0]]['$lte'] = arg[2];\n    else if (arg[1] === 'in' && Array.isArray(arg[2])) {\n      for (let value of arg[2]) {\n        promises.push(db.find({selector: {[arg[0]]: {$eq: value}}, fields: ['_id']}));\n      }\n      if (!arg[2].length) return new Promise((resolve, reject) => resolve([]));\n    }\n    else if (arg[1] === 'not in' && Array.isArray(arg[2])) {\n      if (arg[2].length) need_orm = true;\n      for (let value of arg[2]) {\n        promises.push(db.find({selector: {[arg[0]]: {$gt: value}}, fields: ['_id']}));\n        promises.push(db.find({selector: {[arg[0]]: {$lt: value}}, fields: ['_id']}));\n      }\n    }\n    else if (arg[1] === 'like') {\n      //selectors[index][arg[0]]['$gte'] = arg[2];\n      //promises.push(db.search({query: arg[2], fields: [arg[0]], include_docs: false}));\n      need_orm = true;\n    }\n    else if (arg[1] === 'ilike') {\n      //selectors[index][arg[0]]['$gte'] = arg[2];\n      //promises.push(db.search({query: arg[2], fields: [arg[0]], include_docs: false}));\n      need_orm = true;\n    }\n    if (!Object.keys(selectors[index][arg[0]]).length) {\n      delete selectors[index][arg[0]];\n      selectors.pop([index]);\n      if (!need_orm) arg.splice(0, arg.length);\n      else arg[0] = arg[0].replace('data.', '')\n      continue;\n    }\n    if (!need_orm) arg.splice(0, arg.length);\n    else arg[0] = arg[0].replace('data.', '')\n    index += 1;\n  }\n  for (let selector of selectors) {\n    promises.push(db.find({selector, fields: ['_id']}))\n  }\n  return Promise.all(promises).then((results) => {\n    let ids = [];\n    for (let result of results) {\n      const docs = result.docs || result.rows;\n      for (let doc of docs) {\n        ids.push(doc._id || doc.id)\n      }\n    }\n    if (promises.length > 1) ids = ids.filter((value, index, self) => self.indexOf(value) !== index && value.split('_')[0] === type);\n    ids = ids.map((id) => db.rel.parseDocID(id).id);\n    return ids;\n  });\n}\n\nwindow.qe = query;*/\n\nexport default {globals, preload, get_session, update_session, wait, wait_exist, login, logout, ORM, handleClientError, ajax, readAsDataURL, parseURI, hasValue, hasKey};\n","import React from 'react';\nimport {\n  Page,\n  LoginScreenTitle,\n  List,\n  ListInput,\n  //ListButton,\n  Button,\n} from 'framework7-react';\nimport api from 'api';\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      username: '',\n      password: '',\n    };\n  }\n\n  async componentDidMount() {\n    for (let input of document.querySelectorAll('input[type=text], input[type=password]')) {\n      input.addEventListener('keyup', this.clickEvent.bind(this));\n    }\n    const load = api.preload();\n    if (window.rapyd_config.choose_database) this.setState({databases: await api.ajax('get', 'json', window.localStorage.rapyd_server_url + '/api/databases')});\n    load.done();\n  }\n\n  render() {\n    return (\n      <Page noToolbar noNavbar noSwipeback loginScreen>\n        <LoginScreenTitle>Welcome</LoginScreenTitle>\n        <List form>\n          {this.state.databases &&\n          <ListInput\n            required\n            id=\"login-page-database\"\n            label=\"Database\"\n            type=\"select\"\n            onInput={(e) => {\n              this.setState({ database: e.target.value});\n            }}\n          >\n            <option disabled selected value=''>Choose</option>\n            {this.state.databases && this.state.databases.map((database) =>\n            <option style={{color: '#212121'}} value={database}>{database}</option>\n            )}\n          </ListInput>\n          }\n          <ListInput\n            label=\"Username\"\n            type=\"text\"\n            placeholder=\"Your username\"\n            value={this.state.username}\n            onInput={(e) => {\n              this.setState({ username: e.target.value});\n            }}\n            autofocus\n          />\n          <ListInput\n            label=\"Password\"\n            type=\"password\"\n            placeholder=\"Your password\"\n            value={this.state.password}\n            onInput={(e) => {\n              this.setState({ password: e.target.value});\n            }}\n          />\n          <Button onClick={this.signIn.bind(this)} style={{float: 'left', marginLeft: '10px'}}>Login</Button>\n          <Button onClick={this.setUrl.bind(this)} style={{float: 'right', marginRight: '10px'}}>Settings</Button>\n        </List>\n      </Page>\n    )\n  }\n  clickEvent(event) {\n    event.preventDefault();\n    if (event.keyCode === 13) {\n      this.signIn();\n    }\n  }\n  setUrl() {\n    const app = this.$f7;\n    app.dialog.prompt('', 'Server URL', (url) => localStorage.rapyd_server_url = url);\n    const input = document.querySelector('input.dialog-input');\n    if (input) {\n      input.value = localStorage.rapyd_server_url;\n    }\n  }\n  async signIn() {\n    const load = api.preload();\n    const self = this;\n    const app = self.$f7;\n    //const router = self.$f7.router;\n    try {\n      const success = await api.login({login: self.state.username, password: self.state.password, encrypted: false, ...(this.state.database ? {database: this.state.database} : {})});\n      load.done();\n      if (!success) {\n        return app.dialog.alert('Username/Password wrong, relogin');\n      }\n      app.dialog.alert('Login Successful!', () => {\n        window.location.reload();\n      });\n    }\n    catch(error) {\n      load.done();\n      app.dialog.alert('Network Error');\n      throw error;\n    }\n  }\n}\n","import React from 'react';\nimport {\n    Page,\n    Navbar,\n    NavLeft,\n    NavTitle,\n    NavRight,\n    Link,\n} from 'framework7-react';\n\nexport default (props) => (\n  <Page>\n    <Navbar backLink={(window.models.env.context.active_url === '/' || props.popup) ? false : 'Back'}>\n      {window.models.env.context.active_url === '/' &&\n      <NavLeft>\n        <Link iconMd=\"material:menu\" panelOpen=\"left\"></Link>\n      </NavLeft>}\n      <NavTitle>{props.title}</NavTitle>\n      {!props.popup ?\n      <NavRight>\n        <Link iconMd=\"material:person\" panelOpen=\"right\"></Link>\n      </NavRight> :\n      <NavRight>\n        <Link iconMd=\"material:close\" popupClose></Link>\n      </NavRight>}\n    </Navbar>\n    {props.children}\n  </Page>\n);\n","import React from 'react';\nimport {AgGridReact} from 'ag-grid-react';\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-material.css';\n\nexport default class extends React.Component {\n  render(props) {\n    return (\n      <div style={{height: '100%'}} className=\"ag-theme-material\">\n        <AgGridReact rowSelection=\"multiple\" paginationPageSize={props.paginationPageSize} pagination enableColResize enableServerSideSorting enableServerSideFilter  suppressMultiSort suppressRowClickSelection onGridReady={props.onGridReady} onRowClicked={props.onRowClicked} onSelectionChanged={props.onSelectionChanged} onPaginationChanged={props.onPaginationChanged} onSortChanged={props.onSortChanged} onFilterChanged={props.onFilterChanged} columnDefs={props.columnDefs} rowData={props.rowData} frameworkComponents={props.frameworkComponents} singleClickEdit/>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nlet flatpickr_count = 0;\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n    flatpickr_count += 1;\n    this.count = flatpickr_count;\n  }\n\n  componentWillUnmount() {\n    if (this.props.inline) return document.getElementById('flatpickr-inline-clone-' + this.count) && document.getElementById('flatpickr-inline-clone-' + this.count).remove();\n    if (this.flatpickr) this.flatpickr.destroy()\n    if (this.props.customInput) delete this.props.customInput._flatpickr;\n    delete this.flatpickr;\n  }\n\n  componentDidMount() {\n    const clone = this.props.customComponent ? this.props.customInput : (!this.props.inline ? this.refs.flatpickr : document.getElementById('flatpickr-inline-clone-' + this.count) || this.refs.flatpickr.cloneNode(false));\n    console.log(clone);\n    if (!clone) return;\n    if (this.props.inline) {\n      clone.id = 'flatpickr-inline-clone-' + this.count;\n      //clone.style.display = '';\n      this.refs.flatpickr.insertAdjacentElement('afterend', clone);\n    }\n    let onChange = this.props.onChange;\n    if (this.props.readOnly) onChange = async (value) => value !== await this.props.defaultDate && (await this.props.defaultDate ? this.flatpickr.setDate(await this.props.defaultDate) : this.flatpickr.clear());\n    this.flatpickr = clone._flatpickr || flatpickr(clone, {...this.props, allowKeyboard: false, onChange: async (value) => {await onChange(value); this.flatpickr.open()}});\n  }\n\n  async componentDidUpdate() {\n    if (this.props.customInput) this.componentDidMount();\n    if (!this.flatpickr) return;\n    let onChange = this.props.onChange;\n    if (this.props.readOnly) onChange = async (value) => value !== await this.props.defaultDate && (await this.props.defaultDate ? this.flatpickr.setDate(await this.props.defaultDate) : this.flatpickr.clear());\n    this.flatpickr.set('onChange', async (value) => {await onChange(value); this.flatpickr.open()});\n    const date = await this.props.defaultDate;\n    if (!this.flatpickr) return;\n    if (date) this.flatpickr.setDate(date);\n    else {\n      this.flatpickr.selectedDateObj = null;\n      this.flatpickr.input.value = '';\n    }\n  }\n\n  render(props) {\n    return props.customComponent || (\n      <input ref=\"flatpickr\" style={props.inline && {display: 'none'}}/>\n    );\n  }\n}\n","import React from 'react';\nimport {\n    List,\n    ListInput,\n    F7Button as Button,\n} from 'framework7-react';\nimport {React as Selectivity, Templates} from 'selectivity/react';\nimport 'selectivity/styles/selectivity-react.css';\nimport Flatpickr from './Flatpickr';\nimport api from 'api';\n\nconst singleSelectInput = Templates.singleSelectInput;\nTemplates.singleSelectInput = (options) => singleSelectInput(options).replace('<i class=\"fa fa-sort-desc selectivity-caret\"></i>', '<i class=\"selectivity-caret material-icons\">expand_more</i>');\nconst singleSelectedItem = Templates.singleSelectedItem;\nTemplates.singleSelectedItem = (options) => singleSelectedItem(options).replace('<i class=\"fa fa-remove\"></i>', '<i class=\"selectivity-remove material-icons\">close</i>');\nconst multipleSelectedItem = Templates.multipleSelectedItem;\nTemplates.multipleSelectedItem = (options) => multipleSelectedItem(options).replace('<i class=\"fa fa-remove\"></i>', '<i class=\"selectivity-remove selectivity-multi-remove material-icons\">close</i>');\n\nexport default class extends React.Component {\n  /*constructor(props) {\n    super(props);\n\n    this.props = props;\n  }*/\n\n  async setValue(value, altvalue) {\n    const props = this.props;\n    api.globals.onchange_running = true;\n    await api.wait(0);\n    api.globals.onchange_running = false;\n    window.models.env.context.active_error && (window.models.env.context.active_error.field_map[this.props.name] = false);\n    if (this.input_type && this.input_type === 'file' && value) {\n      value = await api.readAsDataURL(value);\n      value = value.split('base64,')[1];\n    }\n    if (!this.props.cellEdit) window.models.env.context.active_id[this.props.name] = value;\n    else return window.models.env.context.refresh();\n    await window.models.env.context.active_id._wait_promise();\n    const model = props.model;// || window.models.env.context.active_model;\n    const field = window.models.env[model]._fields[props.name];\n    const type = field.type;\n    if (this.refs.input) {\n      await this.setInputValue(value);\n    }\n    else if (api.hasValue(['many2many', 'one2many', 'many2one', 'one2one'], type) && !props.children) {\n      await this.setSelectivityValue(altvalue);\n    }\n    else if (type === 'selection') {\n      if (this.props.widget === 'statusbar') return this.setState({value});\n      await this.setSelectivityValue(altvalue);\n    }\n    else if (api.hasValue(['date', 'datetime'], type)) {\n      await this.setState({value, input: this.refs.date_input.base.querySelector('input')});\n    }\n    else {\n      await this.setState({value: altvalue || value});\n    }\n    return window.models.env.context.refresh();\n  }\n\n  async setSelectivityValue(value) {\n    value = await value;\n    if (!window.tools.exist(value)) return;\n    if (value && typeof value === 'object') return this.setState({value});\n    await api.wait_exist(() => this.refs.selectivity);\n    if (value && value === this.lastSelectivity) return;\n    this.lastSelectivity = value;\n    const props = this.props;\n    const models = window.models;\n    const model = props.model;// || window.models.env.context.active_model;\n    const field = window.models.env[model]._fields[props.name];\n    const type = field.type;\n    if (!model) {\n      return;// this.setState({value: null});\n    }\n    else if (api.hasValue(['many2many', 'one2many', 'many2one', 'one2one'], type) && !props.children) {\n      //const model = props.model || window.models.env.context.active_model;\n      //const field = window.models.env[model]._fields[props.name];\n      const records = await models.env[field.relation].browse(value);\n      if (!records.length) return;\n      if (value.constructor === String) {\n        return this.setState({value: {id: records.id, text: records[records._rec_name || 'name']}});\n      }\n      else if (value.constructor === Array) {\n        return this.setState({value: Array.from(records.__iter__()).map((record) => ({id: record.id, text: record[record._rec_name || 'name']}))});\n      }\n    }\n    else if (type === 'selection') {\n      const selections = typeof field.selection === 'function' ? field.selection.apply(null) : field.selection;\n      return this.setState({value: value && {id: value, text: window.tools.dict(selections)[value]}});\n    }\n  }\n\n  setInputValue(value) {\n    const props = this.props;\n    const model = props.model || window.models.env.context.active_model;\n    const field = window.models.env[model]._fields[props.name];\n    const type = field.type;\n    if (type === 'binary') return;\n    if (type === 'float' || type === 'integer') value = value || null;\n    if (this.refs.input) {\n      if (!api.hasValue(['text', 'data', 'boolean'], type)) {\n        this.refs.input.base.querySelector('input').value = value;\n      }\n      else if (type === 'boolean') {\n        this.refs.input.base.querySelector('input').checked = value;\n      }\n      else {\n        this.refs.input.base.querySelector('textarea').value = type !== 'data' ? value : JSON.stringify(value);\n      }\n    }\n  }\n\n  async componentDidMount() {\n    //if (!window.models.env.context.active_id) window.models.env.context.active_id = window.models.env[window.models.env.context.active_model].browse();\n    await api.wait_exist(() => window.models.env.context.active_id);\n    const props = this.props;\n    const models = window.models;\n    const model = props.model || window.models.env.context.active_model;\n    const field = window.models.env[model]._fields[props.name];\n    const type = field.type;\n    const context = window.models.env.context;\n    if (context.active_id._pending_promises.length > 0) await context.active_id._wait_promise();\n    const value = props.cellEdit ? null : context.active_id && await context.active_id[this.props.name];\n    if (this.props.ref_object) Object.assign(this.props.ref_object, this.refs, {loaded: true});\n    if (this.refs.input) {\n      return this.setInputValue(value);\n    }\n    else if (api.hasValue(['many2many', 'one2many', 'many2one', 'one2one'], type) && !props.children) {\n      return this.setSelectivityValue(value);\n    }\n    else if (type === 'selection') {\n      if (this.props.widget === 'statusbar') return this.setState({value});\n      return this.setSelectivityValue(value);\n    }\n    else if (api.hasValue(['date', 'datetime'], type)) {\n      return this.setState({value, input: this.refs.date_input.base.querySelector('input')});\n    }\n    else {\n      return this.setState({value});\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.refs.selectivity && this.refs.selectivity.selectivity) this.refs.selectivity.selectivity.destroy();\n  }\n\n  render(props) {\n    const models = window.models;\n    const model = props.model || window.models.env.context.active_model;\n    const field = window.models.env[model]._fields[props.name];\n    if (!field) return;\n    const string = props.string || field.string;\n    const type = field.type;\n    const types = {char: 'text', text: 'textarea', float: 'number', integer: 'number', data: 'textarea', 'boolean': 'checkbox', 'binary': 'file'};\n    const context = window.models.env.context;\n    const refs = this.refs;\n    const active_id = props.cellEdit ? context.active_lines[this.props.tree.state.model][(this.props.tree.props.parent_model ? 'many2many_' : '') + this.props.tree.state.tree_field].find(this.props.tree.state.records[this.props.rowIndex].id || this.props.tree.state.records[this.props.rowIndex]._original_object_for_id) : context.active_id;\n    const invisible = props.invisible instanceof Function && active_id ? props.invisible(active_id, models.env.context.active_id) : props.invisible;\n    props.readonly = field.readonly || props.readonly;\n    const readonly = props.readonly instanceof Function ? props.readonly(active_id) : props.readonly;\n    const value = props.cellEdit ? null : context.active_id && context.active_id[this.props.name];\n\n    async function fetch(url, init, query) {\n      try {\n        const limit = 10\n        models.env.context.active_limit = limit;\n        models.env.context.active_index = query.offset / limit;\n        const domain = (active_id && props.domain) ? props.domain(...(!props.cellEdit ? [active_id] : [active_id, models.env.context.active_id])) : [];\n        const records = await models.env[field.relation].with_context({no_preload: true}).search([(models.env[field.relation]._rec_name || 'name'), 'ilike', query.term], ...domain);\n        if (models.env.context.active_lines[field.relation]) {\n          for (var inverse_field in models.env.context.active_lines[field.relation]) {\n            records.add(models.env.context.active_lines[field.relation][inverse_field].filter((record) => record[record._rec_name || 'name'] && record[record._rec_name || 'name'].toLowerCase().indexOf(query.term.toLowerCase()) !== -1));\n          }\n        }\n        const results = [];\n        if (type === 'selection') return {results, more: false};\n        for (let record of records) {\n          if (!record.id) {\n            const id = 'etemp' + Math.random().toString(36).substr(2, 9);\n            if (!api.globals.temp_records) api.globals.temp_records = {};\n            api.globals.temp_records[id] = record;\n            results.push({id, text: record[record._rec_name || 'name']});\n            continue;\n          }\n          results.push({id: record.id, text: record[record._rec_name || 'name']});\n        }\n        models.env.context.active_index = 0;\n        console.log((query.offset / limit + 1) * limit < records._search_count);\n        console.log(results);\n        return {results: results, more: (query.offset / limit + 1) * limit < records._search_count};\n      }\n      catch(error) {\n        console.error(error);\n        throw error;\n      }\n    }\n\n    if (api.hasValue(['many2many', 'one2many'], type) && props.children) {\n      return props.children;\n    }\n\n    let component;\n\n    if (type === 'selection' && props.widget === 'statusbar') {\n      let first = true;\n      let selections = typeof field.selection === 'function' ? field.selection.apply(context.active_id, [context.active_id]) : field.selection;\n      selections = window.tools.copy(selections).reverse();\n      if (props.visible) selections = selections.filter((selection) => props.visible.split(',').indexOf(selection[0]) > -1 || (models.env.context.active_id && models.env.context.active_id[props.name] === selection[0]))\n      component = (\n        <div style={{...(invisible ? {display: 'none'} : {}), overflow: 'overlay'}}>\n          {selections.map((selection) =>\n          first ? <Button raised={models.env.context.active_id && models.env.context.active_id[props.name] === selection[0]} className=\"rapyd-statusbars\">{(first = false) || selection[1]}</Button> : [<span className=\"rapyd-statusbars rapyd-statusbar-arrow\">{'>'}</span>, <Button raised={models.env.context.active_id && models.env.context.active_id[props.name] === selection[0]} className=\"rapyd-statusbars\">{selection[1]}</Button>]\n          )}\n        </div>\n      );\n      return component;\n    }\n\n    if (api.hasValue(['many2many', 'one2many', 'many2one', 'one2one', 'selection'], type)) {\n      let ajax;\n      let items = null;\n      if (api.hasValue(['many2many', 'one2many', 'many2one', 'one2one'], type)) {\n        ajax = {url: window.tools.configuration.url, minimumInputLength: 0, params: () => ({}), placeholder: '', fetch: fetch};\n      }\n      else if (type === 'selection') {\n        const selections = typeof field.selection === 'function' ? field.selection.apply(context.active_id, [context.active_id]) : field.selection;\n        items = selections.map((selection) => ({id: selection[0], text: selection[1]}));\n      }\n      const active_id = window.models.env.context.active_id;\n      const after_create = () => {\n        const record = window.models.env.context.active_id;\n        const assign_record = () => {\n          window.models.env.context.active_id.values = active_id.values;\n          window.models.env.context.active_id[props.name] = record.id;\n          if (!window.models.env.context.editing) window.models.env.context.active_id.write();\n          //window.models.env.context.refresh();\n          //this.setState(this.state);\n        }\n        api.wait(100).then(() => api.globals.app.views.main.router.back() && api.wait_exist(() => window.models.env.context.active_id._name === model).then(assign_record));\n      }\n      const icon_create = (!readonly && context.editing) && (window.models.env.context.active_id && !window.models.env.context.active_id[props.name]);\n      component = [(\n        <ListInput label={string} input={false} disabled={readonly || !context.editing} errorMessageForce={window.models.env.context.active_error ? window.models.env.context.active_error.field_map[props.name] : false} errorMessage=\"Field required\" style={!props.cellEdit && type !== 'selection' && icon_create && {'height': '65px'}}>\n          <Selectivity ref=\"selectivity\" slot=\"input\" data={window.tools.exist(this.state.value) && this.state.value.constructor !== Promise ? this.state.value : null} ajax={ajax} items={items} placeholder={props.placeholder || ''} readOnly={readonly || !context.editing} multiple={api.hasValue(['many2many', 'one2many'], type)} onChange={(event) => this.setValue(event.value, event.data)} onDropdownOpen={() => this.setState({'selectivityOpened': true})} onDropdownClose={() => (props.onSelect ? props.onSelect() : true) && this.setState({'selectivityOpened': false})} allowClear closeOnSelect/>\n        </ListInput>\n      ),\n      (\n        !props.cellEdit && type !== 'selection' && <i className=\"icon material-icons\" onClick={async () => api.globals.app.views.main.router.navigate('/form/' + field.relation) && !(await api.wait(100)) && window.models.env.context.active_task.push(after_create)} style={{'top': '-30px', 'left': '280px', 'display': !icon_create ? 'none' : 'unset'}}>open_in_new</i>\n      )];\n      if (props.cellEdit) return component[0].children[0];\n      api.wait(500).then(() => api.wait_exist(() => context.active_id)).then(async () => await context.active_id[props.name] && this.setSelectivityValue(await context.active_id[props.name]));\n    }\n    else if (api.hasValue(['date', 'datetime'], type)) {\n      const input = (\n        <ul>\n          <ListInput ref=\"date_input\" label={string} placeholder={props.placeholder || ''} disabled={readonly || !context.editing} errorMessageForce={window.models.env.context.active_error ? window.models.env.context.active_error.field_map[props.name] : false} errorMessage=\"Field required\"/>\n        </ul>\n      );\n      component = (\n        <Flatpickr customComponent={input} customInput={this.state.input} enableTime={type === 'datetime' && true} enableSeconds={type === 'datetime' && true} defaultDate={this.state.value || value} onChange={(value) => console.log(value) || this.setValue(value)}/>\n      );\n      if (props.cellEdit) return component.children.children;\n    }\n    else {\n      this.input_type = types[type];\n      component = (\n        <ListInput ref=\"input\" label={string} type={types[type]} placeholder={props.placeholder || ''} disabled={readonly || !context.editing} onChange={(event) => this.setValue(event.target.type === 'checkbox' ? event.target.checked : event.target.type === 'file' ? event.target.files[0] : event.target.value)} errorMessageForce={window.models.env.context.active_error ? window.models.env.context.active_error.field_map[props.name] : false} errorMessage=\"Field required\"/>\n      );\n      api.wait_exist(() => this.refs.input).then(async () => this.setInputValue(await value || await this.state.value || null));\n    }\n\n    return (\n      <List style={{...(invisible ? {display: 'none'} : {}), ...(!this.state.selectivityOpened ? {'zIndex': '0'} : {})}}>\n        {component}\n      </List>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Field from './Field';\nimport api from 'api';\n\nexport default class extends Component {\n  async afterGuiAttached() {\n    await api.wait_exist(() => this.refs.loaded);\n    if (this.refs.selectivity && this.refs.selectivity.selectivity) this.refs.selectivity.selectivity.open();\n  }\n\n  getValue() {\n    if (this.refs.selectivity && this.refs.selectivity.selectivity) {\n      let value = this.refs.selectivity.selectivity.getData();\n      if (!value) return this.props.tree.state.records[this.props.rowIndex][this.props.name];\n      const colDef = window.tools.copy(this.props.column.colDef);\n      delete colDef.cellEditorFramework;\n      let temp_ids = this.refs.selectivity.selectivity.getValue();\n      if (!Array.isArray(temp_ids)) temp_ids = [temp_ids];\n      const field = window.models.env[this.props.model]._fields[this.props.name];\n      const records = field.relation && window.models.env[field.relation];\n      for (let temp_id of temp_ids) {\n        if (!field.relation) break;\n        if (temp_id.slice(0, 5) === 'etemp') {\n          records.add(api.globals.temp_records[temp_id]);\n        }\n        else {\n          const record = records.browse();\n          record.update({id: temp_id});\n          records.add(record);\n        }\n      }\n      if (!Array.isArray(value)) {\n        value = value.text;\n      }\n      else {\n        value = value.map((data) => data.text).join(', ');\n      }\n      this.props.tree.onChange({colDef, data: this.props.tree.state.records[this.props.rowIndex], specialValue: value, oldValue: null, newValue: field.relation ? records : this.refs.selectivity.selectivity.getValue()});\n      /*if (this.props.tree.state.selected) {\n        for (let row of this.props.tree.state.selected) {\n          if (row === this.props.tree.state.records[this.props.rowIndex]) continue;\n          this.props.tree.onChange({colDef, data: row, oldValue: null, newValue: field.relation ? records : this.refs.selectivity.selectivity.getValue()});\n          row[this.props.name] = value;\n        }\n        api.wait(100).then(() => this.props.tree.gridOptions.api.deselectAll() || this.props.tree.setState({records: this.props.tree.state.records}));\n      }*/\n      return value;\n    }\n  }\n\n  async onSelect() {\n    await api.wait(10);\n    this.props.api.stopEditing();\n  }\n\n  render(props) {\n    //const field = props.field_object;\n    //delete props.field_object;\n    this.refs = {};\n    const onSelect = this.onSelect.bind(this);\n    const component = (<Field {...props} ref_object={this.refs} cellEdit={true} onSelect={onSelect}/>);\n    return component;\n  }\n}\n","import React from 'react';\n\nfunction changeValue(props) {\n  const value = !props.value;\n  const colDef = window.tools.copy(props.column.colDef);\n  delete colDef.cellEditorFramework;\n  const field = window.models.env[props.model]._fields[props.name];\n  const records = field.relation && window.models.env[field.relation];\n  return props.tree.onChange({colDef, data: props.tree.state.records[props.rowIndex], specialValue: value, oldValue: props.value, newValue: value});\n}\n\nexport default (props) => (\n  <span className=\"ag-selection-checkbox\">\n    <span className={'ag-icon ' + (props.value ? 'ag-icon-checkbox-checked' : 'ag-icon-checkbox-unchecked')}/>\n  </span>\n)\n","import React from 'react';\nimport Page from './Page';\nimport Grid from './Grid';\nimport GridEditor from './GridEditor';\nimport GridCheckbox from './GridCheckbox';\nimport {Button, Popup} from 'framework7-react';\nimport csv from 'csv.js';\nimport FileSaver from 'file-saver';\nimport api from 'api';\n\nfunction autoSizeAll(gridOptions, listener) {\n  if (this) {\n    this.gridOptions = gridOptions;\n    for (let column of gridOptions.api.gridCore.gridOptions.columnDefs) {\n      gridOptions.api.getFilterInstance(column.field).eClearButton.addEventListener('click', () => gridOptions.api.onFilterChanged());\n    }\n    //let columns = gridOptions.api.gridPanel.columnController.getAllDisplayedColumns();\n    //let usedWidth = gridOptions.api.gridPanel.columnController.getWidthOfColsInList(columns);\n  }\n  //if (document.getElementById('rapyd-maximum-tree-width')) /*(clone = document.getElementById('rapyd-maximum-tree-width').cloneNode()) && */document.getElementById('rapyd-maximum-tree-width').remove();\n  const div = gridOptions.api.gridCore.eGridDiv;\n  const overflown = Array.prototype.slice.call(div.querySelectorAll('span.ag-header-cell-text')).find((element) => element.offsetWidth < element.scrollWidth);\n  //let availableWidth = gridOptions.api.gridPanel.getWidthForSizeColsToFit();\n  if (!overflown) {\n    gridOptions.api.sizeColumnsToFit();\n    Array.prototype.slice.call(document.querySelectorAll('div.ag-paging-panel')).map((element) => element.style.width = parseFloat(element.parentElement.querySelector('.ag-header-viewport .ag-header-row').style.width.replace('px', '')) - 48 + 'px');\n    if (document.getElementById('rapyd-maximum-tree-width')) {\n       if (document.querySelector('.panel-visible-by-breakpoint')) document.getElementById('rapyd-maximum-tree-width').innerHTML = document.getElementById('rapyd-maximum-tree-width').innerHTML.replace('.component-group, .component-sheet {width: 46.5vw}', '');\n       else if (document.getElementById('rapyd-maximum-tree-width').innerHTML.indexOf('.component-group, .component-sheet {width: 46.5vw}') === -1) document.getElementById('rapyd-maximum-tree-width').innerHTML += '.component-group, .component-sheet {width: 46.5vw}';\n    }\n    //const rowWidth = div.querySelector('div.ag-header-row').style.width;\n    //div.querySelector('div.ag-paging-panel').style.width = rowWidth;\n    //if (clone) document.querySelector('head').append(clone);\n    return;\n  }\n  //if (clone) document.querySelector('head').append(clone);\n  if (true) {\n    (async () => {\n      await api.wait(200);\n      const allColumnIds = [];\n      gridOptions.columnApi.getAllColumns().forEach(function(column) {\n        allColumnIds.push(column.colId);\n      });\n      gridOptions.columnApi.autoSizeColumns(allColumnIds);\n      const popups = Array.prototype.slice.call(document.querySelectorAll('div.popup'));\n      const maxWidth = Math.max(...Array.prototype.slice.call(document.querySelectorAll('div.ag-header-row')).filter((element) => element.offsetParent && !popups.find((popup) => popup.contains(element))).map((element) => parseFloat(element.style.width.replace('px', ''))));\n      let popupWidth = 0;\n      if (popups.length) popupWidth = Math.max(...Array.prototype.slice.call(document.querySelectorAll('div.ag-header-row')).filter((element) => element.offsetParent && popups.find((popup) => popup.contains(element))).map((element) => parseFloat(element.style.width.replace('px', ''))));\n      const style = document.getElementById('rapyd-maximum-tree-width') || document.createElement('style');\n      style.id = 'rapyd-maximum-tree-width';\n      style.innerHTML = '.rapyd-card-sheet {min-width: ' + (maxWidth + 30) + 'px}';\n      if (!document.querySelector('.panel-visible-by-breakpoint')) style.innerHTML += '\\n.component-group, .component-sheet {width: 46.5vw}';\n      if (popupWidth && popupWidth !== -Infinity) style.innerHTML += '\\n .popup .rapyd-card-sheet {min-width: ' + (popupWidth + 30) + 'px}';\n      document.querySelector('head').append(style);\n      Array.prototype.slice.call(document.querySelectorAll('div.ag-paging-panel')).map((element) => element.style.width = parseFloat(element.parentElement.querySelector('.ag-header-viewport .ag-header-row').style.width.replace('px', '')) - 48 + 'px');\n      //const rowWidth = div.querySelector('div.ag-header-row').style.width;\n      //div.querySelector('div.ag-paging-panel').style.width = rowWidth;\n    })();\n  }\n}\n\nexport default class Tree extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const model = props.model || window.models.env.context.active_model;\n    const this_tree = this;\n    function isEditable(params) {\n      let result;\n      if (props.isTreeView && !props.editable) {\n        return false;\n      }\n      if (window.models.env.context.editing) {\n        result = true;\n      }\n      if (result && this && this != this_tree) {\n        const context = window.models.env.context;\n        const model = props.model || window.models.env.context.active_model;\n        const field = window.models.env[model]._fields[this.props.name];\n        const active_id = context.active_lines[this_tree.state.model][(this_tree.props.parent_model ? 'many2many_' : '') + this_tree.state.tree_field].find(this_tree.state.records[params.node.rowIndex].id || this_tree.state.records[params.node.rowIndex]._original_object_for_id);\n        const readonly = field.readonly || this.props.readonly;\n        return !(readonly instanceof Function ? readonly(active_id) : readonly);\n      }\n      return result || false;\n    }\n    this.isEditable = isEditable;\n    this.pendingTask = {create: false, write: false, tasked: false};\n    this.pendingCreate = false;\n    this.pendingWrite = false;\n    function taskJob() {\n      if (this.pendingTask.tasked) return;\n      this.pendingTask.tasked = true;\n      window.models.env.context.active_task.push((async () => {\n        if (this.pendingTask.create) await this.state.new_records.create();\n        if (this.pendingTask.write) await window.models.env.context.active_lines[this.state.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field].write();\n        if (this.props.parent_model) window.models.env.context.active_id.write({[this.state.tree_field]: window.models.env.context.active_lines[this.state.model]['many2many_' + this.state.tree_field].ids});\n      }).bind(this));\n    }\n    this.taskJob = taskJob.bind(this);\n    function onChange(params) {\n      if (!params.colDef.cellEditorFramework && params.newValue != params.oldValue) {\n        const value = params.newValue;\n        const records = window.models.env.context.active_lines[this.state.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field];\n        const record = params.data.id ? records.find(params.data.id) : records.find(params.data._original_object_for_id);\n        if (!this.pendingTask.write && record.id) {\n          this.pendingTask.write = true;\n        }\n        else if (!this.pendingTask.create && !record.id) {\n          this.pendingTask.create = true;\n        }\n        if (!this.pendingTask.tasked && (this.pendingTask.create || this.pendingTask.write)) {\n          this.taskJob();\n        }\n        record[params.colDef.field] = value;\n        if (!params.selectedOnchange && this.state.selected) {\n          for (let row of this.state.selected) {\n            if (row === params.data) continue;\n            this.onChange({colDef: params.colDef, selectedOnchange: true, data: row, specialValue: params.specialValue, oldValue: null, newValue: value});\n            row[params.colDef.field] = params.specialValue || value;\n          }\n          //api.wait(100).then(() => this.gridOptions.api.deselectAll()).then(() => this.setState({records: this.state.records})).then(() => this.gridOptions.api.refreshCells());\n          api.wait(100).then(() => this.gridOptions.api.deselectAll()).then(() => this.setState({records: this.state.records})).then(() => !params.colDef.cellEditorParams && this.gridOptions.api.refreshCells());\n        }\n      }\n    }\n    this.onChange = onChange.bind(this);\n    function onSelectionChanged(event) {\n      let selected = event.api.getSelectedRows();\n      if (selected.length > this.state.limit) selected = selected.slice(this.state.limit * event.api.paginationGetCurrentPage(), this.state.limit * (event.api.paginationGetCurrentPage() + 1));\n      const ids = [];\n      for (let data of selected) {\n        if (data.id) ids.push(data.id);\n      }\n      this.pagingCalled = true;\n      api.wait(1000).then(() => this.pagingCalled = false);\n      return this.setState({active_ids: ids, selected});\n    }\n    this.onSelectionChanged = onSelectionChanged.bind(this);\n    function handleOutside(event) {\n      if (this.refs.grid && !this.refs.grid.base.querySelector('div.ag-body').contains(event.target) && this.gridOptions) this.gridOptions.api.stopEditing();\n    }\n    this.handleOutside = handleOutside.bind(this);\n    const children = props.children.constructor === Array ? props.children : [props.children];\n    const fields = children.map((child, index) => ({headerName: (() => child.attributes.string || window.models.env[model]._fields[child.attributes.name].string)(), field: child.attributes.name, suppressMovable: true, filterParams: {applyButton: true, clearButton: true, newRowsAction: 'keep'}, editable: window.models.env[model]._fields[child.attributes.name].type !== 'boolean' && isEditable.bind(child), invisible: child.props.invisible, onCellValueChanged: this.onChange, ...(child.props.sort ? (this.default_sort = child.props.name + ' ' + child.props.sort) && {sort: child.props.sort} : {}), ...((['date', 'datetime', 'selection', 'boolean'].indexOf(window.models.env[model]._fields[child.attributes.name].type) !== -1 || window.models.env[model]._fields[child.attributes.name].relation) ? {cellEditorFramework: window.models.env[model]._fields[child.attributes.name].type !== 'boolean' && GridEditor, cellEditorParams: {...child.props, model, tree: this}, cellRendererParams: {...child.props, model, tree: this}, cellClass: 'editable-special-cell', cellRendererFramework: window.models.env[model]._fields[child.attributes.name].type === 'boolean' && GridCheckbox} : {})}));\n    fields[0].checkboxSelection = true;\n    fields[0].headerCheckboxSelection = true;\n    //fields[0].suppressSizeToFit = true;\n    const limit = parseInt(props.limit) || (props.isTreeView ? 50 : 500);\n    const records = [];\n    this.state = {fields: fields, records: records, new_records: window.models.env[model], limit: limit, model: model, frameworkComponents: {specialEditor: GridEditor}, selected: []};//, popupOpened: false};\n    if (props.field) {\n      this.state.tree_field = props.field;\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.gridOptions) {\n      if (window.innerWidth === this.lastWidth) return;\n      else this.lastWidth = window.innerWidth;\n      autoSizeAll(this.gridOptions);\n    }\n  }\n\n  componentDidMount() {\n    const prompt_limit = () => {\n      api.globals.app.dialog.prompt('', 'Limit', (limit) => (this.state.limit = parseInt(limit)) && this.paging(0, {newData: false, forceUpdate: true}))\n      const input = document.querySelector('input.dialog-input');\n      if (input) {\n        input.type = 'number';\n        input.value = this.state.limit;\n      }\n    }\n    if (this.refs.grid && this.refs.grid.base) {\n      if (this.props.isTreeView && this.refs.grid.base.querySelector('span.ag-paging-row-summary-panel')) this.refs.grid.base.querySelector('span.ag-paging-row-summary-panel').onclick = prompt_limit;\n      //const width = this.refs.grid.base.querySelector('div.ag-header-row').style.width;\n      //this.refs.grid.base.querySelector('div.ag-paging-panel').style.width = width;\n    }\n    document.addEventListener('mousedown', this.handleOutside);\n    //return autoSizeAll.bind(this)(this.gridOptions);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleOutside);\n    window.removeEventListener('resize', this.resizeListener);\n    //delete window.models.env.context.maxTreeWidth;\n    if (!this.props.isPopup && document.getElementById('rapyd-maximum-tree-width')) document.getElementById('rapyd-maximum-tree-width').remove();\n  }\n\n  paginate(rows, index=0) {\n    if (rows.length < 1) {\n      return rows;\n    }\n    //rows = rows.concat(this.state.new_records)\n    const count = rows[0]._search_count;\n    const default_row = {...rows[0]};\n    for (let key in default_row) default_row[key] = null;\n    if (index > 0) {\n      let pushed = 0;\n      while (pushed < this.state.limit * index) {\n        rows.unshift(default_row);\n        pushed += 1;\n      }\n    }\n    while (rows.length < count) {\n      rows.push(default_row);\n    }\n    return rows;\n  }\n\n  sort(fields, params) {\n    const models = window.models;\n    if (fields.length > 0) {\n      models.env.context.active_sort = fields[0].colId + ' ' + fields[0].sort;\n    }\n    else {\n      delete models.env.context.active_sort;\n    }\n    /*const load = api.preload();\n    try {\n      const args = [];\n      if (this.state.tree_field) {\n        args.push([this.state.tree_field, 'in', window.models.env.context.active_ids]);\n      }\n      const records = await models.env[this.state.model || models.env.context.active_model].search(...args);\n      let result = [];\n      if (records.length > 0) {\n        result = records.values.constructor === Array ? records.values : [records.values];\n      }\n      this.setState({records: result});\n    }\n    catch(error) {\n      console.log(error);\n    }\n    load.done();*/\n    if (params.api.paginationGetCurrentPage() !== 0) {\n      params.api.paginationGoToFirstPage();\n    }\n    else {\n      params.newData = false;\n      params.forcePopup = true;\n      params.forceUpdate = true;\n      this.paging.bind(this)(0, params);\n    }\n  }\n\n  async filter(fields, params) {\n    const models = window.models;\n    //const load = api.preload();\n    if (this.state.tree_field) await api.wait_exist(() => models.env.context.active_id);\n    const args = [];//this.state.tree_field ? [!this.props.parent_model && [this.state.tree_field, 'in', window.models.env.context.active_ids] || ['id', 'in', window.models.env.context.active_id[this.state.tree_field] || []]] : [];\n    const values = [];\n    for (let field in fields) {\n      let conditions = [fields[field]];\n      let operator = 'AND';\n      if (fields[field].operator !== undefined) {\n        conditions = [fields[field].condition1, fields[field].condition2];\n        operator = fields[field].operator;\n      }\n      const types = {startsWith: 'ilike', endsWith: 'ilike', contains: 'ilike', notContains: 'not ilike', equals: '=', notEqual: '!='};\n      if (operator === 'OR') {\n        args.push('|');\n      }\n      for (let condition of conditions) {\n        /*if (operator === 'OR') {\n          args.push('|');\n        }*/\n        values.push(condition.filter);\n        if (models.env[this.state.model]._fields[field].relation) {\n          const relation = models.env[models.env[this.state.model]._fields[field].relation];\n          const result_ids = await relation.search([relation._rec_name || 'name', types[condition.type], condition.filter]);\n          args.push([field, 'in', result_ids.ids]);\n          continue;\n        }\n        args.push([field, types[condition.type], condition.filter]);\n      }\n    }\n    this.args = args;\n    /*try {\n      const records = await models.env[this.state.model || models.env.context.active_model].search(...args);\n      let result = [];\n      if (records.length > 0) {\n        result = records.values.constructor === Array ? records.values : [records.values];\n      }\n      this.setState({records: result});\n    }\n    catch(error) {\n      console.log(error);\n    }*/\n    //load.done();\n    if (params.api.paginationGetCurrentPage() !== 0) {\n      await params.api.paginationGoToFirstPage();\n    }\n    else {\n      params.newData = false;\n      params.forcePopup = true;\n      params.forceUpdate = true;\n      await this.paging.bind(this)(0, params);\n    }\n    /*let index = 0;\n    for (let input of window.document.getElementsByClassName('ag-filter-filter')) {\n      if (values[index] !== undefined) {\n        let value = values[index];\n        input.value = value;\n        //setTimeout(() => input.value = value, 1000);\n      }\n      index += 1;\n    }*/\n  }\n\n  async paging(index, params) {\n    if (this.pagingStarted && !document.getElementsByClassName('preloader-modal').length) this.pagingStarted = false;\n    if (params.newData !== false || (!params.forceUpdate && !this.props.isTreeView) || this.pagingStarted) {\n      return;\n    }\n    if (index === 0 && this.props.isPopup && !params.forcePopup) return;\n    //const load = api.preload();\n    try {\n      const models = window.models;\n      if (this.state.tree_field) await api.wait_exist(() => models.env.context.active_id);\n      if (this.state.tree_field  && (!models.env.context.active_id || this.props.view_model !== models.env.context.active_id._name)) return;\n      if (params.deleting) {\n        if (!this.args) this.args = [];\n        this.args.push(['id', 'not in', this.state.active_ids]);\n      }\n      if (!this.page_domain && api.globals.app.view.main.router.currentRoute.query.domain) {\n        this.page_domain = JSON.parse(api.globals.app.view.main.router.currentRoute.query.domain);\n      }\n      const args = (this.props.field_name ? [['id', 'in', window.models.env.context.active_id[this.props.field_name] || []]] : []).concat(this.page_domain || []);\n      if (this.args) args.push(...this.args);\n      models.env.context.active_args = args;\n      models.env.context.active_limit = this.state.limit;\n      models.env.context.active_index = index;\n      if (!models.env.context.active_sort && this.default_sort) (models.env.context.active_sort = this.default_sort) && delete this.default_sort;\n      this.pagingStarted = true;\n      const current_args = [...args, ...((this.props.domain instanceof Function ? this.props.domain({}) : this.props.domain) || [])];\n      if (models.env.context.editing && this.last_args && this.last_args === JSON.stringify(current_args)) return;\n      this.last_args = JSON.stringify(current_args);\n      let records = await models.env[this.state.model].search(...current_args);\n      if (!this.props.isTreeView) {\n        if (!models.env.context.active_lines) models.env.context.active_lines = {};\n        if (!models.env.context.active_lines[this.state.model]) models.env.context.active_lines[this.state.model] = {};\n        if (!models.env.context.active_lines[this.state.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field]) {\n          models.env.context.active_lines[this.state.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field] = records;\n        }\n        else {\n          records = models.env.context.active_lines[this.state.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field].add(records);\n        }\n      }\n      else {\n        records.add(this.state.new_records);\n      }\n      if (records.length > 0) {\n        if (!this.props.isTreeView && this.args) {\n          records = records.filter((record) => {\n            const domain = window.tools.copy(this.args);\n            for (let args of domain) if (Array.isArray(args)) args[0] = record[args[0]];\n            return window.tools.apply_domain(...domain);\n          });\n        }\n        await this.setState({records: this.paginate(await records.sort_by(...(!models.env.context.active_sort ? [records._rec_name || 'name', false] : models.env.context.active_sort.split(' ').map((value) => value == 'asc' ? false : value))).read(true, this.state.fields.map((field) => field.field)), index), limit: this.state.limit})\n      }\n      else if (records.length === 0) await this.setState({records: []});\n    }\n    catch(error) {\n      console.error(error);\n    }\n    //load.done();\n  }\n\n  async addItem() {\n    if (!this.isEditable()) return;\n    const record = window.models.env[this.state.model].browse();\n    if (window.models.env.context.active_id.id && !this.props.parent_model) record[this.state.tree_field] = window.models.env.context.active_id.id;\n    if (record._pending_promises.length > 0) {\n      await record._wait_promise();\n      if (!this.pendingTask.tasked) {\n        this.pendingTask.create = true;\n        this.taskJob();\n      }\n    }\n    const values = await record.read(true, this.state.fields.map((field) => field.field));\n    this.state.new_records.add(record);\n    this.state.records.push(values[0]);\n    if (!this.props.treeView) window.models.env.context.active_lines[this.state.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field].add(record);\n    await this.setState({records: this.state.records, new_records: this.state.new_records});\n    this.gridOptions.api.updateRowData({add: values});\n  }\n\n  async chooseItem() {\n    //await this.setState({popupOpened: true});\n    await this.refs.popup.paging(0, {newData: false, forcePopup: true});\n    const node = this.refs.popup_modal.getDOMNode();\n    node.className = 'popup modal-in';\n    node.children[0].className = node.children[0].className.replace('page-next', '').replace('page-previous', '');\n    autoSizeAll(this.refs.popup.gridOptions);\n    return;\n  }\n\n  async selectItem() {\n    if (this.state.active_ids.length > 0) {\n      const selected_ids = await window.models.env[this.props.model].browse(this.state.active_ids);\n      const records = window.models.env.context.active_lines[this.props.model][(this.props.many2many ? 'many2many_' : '') + this.props.active_field].add(selected_ids);\n      window.models.env.context.active_id[this.props.active_field_name] = records;\n      await window.models.env.context.active_id._wait_promise();\n      await this.props.parent_tree.paging(0, {newData: false, forceUpdate: true});\n      this.gridOptions.api.deselectAll();\n      this.props.parent_tree.refs.popup_modal.getDOMNode().className = this.props.parent_tree.refs.popup_modal.getDOMNode().className.replace('modal-in', 'modal-out');\n      //return await this.parent_tree.setState({popupOpened: false});\n    }\n  }\n\n  async removeItem() {\n    if (this.props.isTreeView) {\n      const records = await window.models.env[this.state.model].browse(this.state.active_ids);\n      await records.unlink();\n      await this.paging.bind(this)(0, {newData: false});\n      //this.gridOptions.api.updateRowData({remove: this.state.selected});\n      return this.gridOptions.api.deselectAll();//this.setState({selected: []});\n    }\n    const field = window.models.env[this.props.parent_model || this.state.model]._fields[this.state.tree_field];\n    const type = field.type;\n    for (let data of this.state.selected) {\n      let index = this.state.records.length;\n      while (index--) {\n        if (data === this.state.records[index]) this.state.records.splice(index);\n      }\n      if (!window.models.env.context.active_id.id || type != 'many2one') {\n        console.log(type)\n        const records = window.models.env.context.active_lines[this.state.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field];\n        const values = records.values;\n        if (!Array.isArray(values)) {\n          if (type != 'many2one') {\n            if (data._original_object_for_id && data._original_object_for_id === values) records._values[0] = {};\n            else if (data.id === values.id) (records._values[0] = {}) && delete records._values[data.id];\n            continue;\n          }\n          if (data._original_object_for_id ? data._original_object_for_id === values : data.id === values.id) window.models.env.context.active_lines[this.state.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field] = window.models.env[this.state.model];\n          continue;\n        }\n        let index = values.length\n        while (index--) {\n          if (data._original_object_for_id && data._original_object_for_id === values[index]) values.splice(index);\n          else if (!data._original_object_for_id && data.id === values[index].id) values.splice(index) || delete records._values[data.id];\n        }\n        continue;\n      }\n      if (type != 'many2one') continue;\n      const params = {data};\n      params.oldValue = \"\";\n      params.newValue = null;\n      params.colDef = {field: this.state.tree_field};\n      this.onChange(params);\n    }\n    const selected = this.state.selected;\n    //await this.setState({records: this.state.records, selected: []});\n    if (type != 'many2one') window.models.env.context.active_id[this.state.tree_field] = window.models.env.context.active_lines[this.state.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field];\n    //this.gridOptions.api.updateRowData({remove: selected});\n    await this.paging.bind(this)(0, {newData: false, deleting: true, forceUpdate: true});\n    return this.gridOptions.api.deselectAll();\n  }\n\n  exportItem() {\n    if (!this.state.selected) return this.gridOptions.api.deselectAll();\n    FileSaver.saveAs(new Blob([csv.serialize({fields: Object.keys(this.state.selected[0]).map((key) => ({id: key})), records: this.state.selected})], {type: 'text/csv;charset=utf-8'}), document.getElementById('main-view').querySelector('div.title').innerText + '.csv');\n    return this.gridOptions.api.deselectAll();\n  }\n\n  render(props) {\n    const model = props.model || window.models.env.context.active_model;\n    const models = window.models;\n    const editableHeight = () => this.isEditable() ? (30) : 0\n    const choose = (props.choose !== undefined ? (props.choose instanceof Function ? props.choose(models.env.context.active_id) : props.choose) : props.parent_model);\n    const invisible = props.invisible instanceof Function ? props.invisible(window.models.env.context.active_id) : props.invisible;\n    const grid = (\n      <div className={\"card-body\" + (invisible ? ' rapyd-tree-is-invisible' : '')} style={{height: Math.min(this.state.records.length, this.state.limit) * 48 + 112 + editableHeight()/* <= 440 ? this.state.records.length * 48 + 112 + editableHeight() + 'px' : '67vh'*/ + 'px', ...(invisible ? {position: 'absolute', left: '-9999px', top: '-9999px'} : {})}}>\n        <Grid ref=\"grid\" onGridReady={((params) => autoSizeAll.bind(this)(params) || window.addEventListener('resize', this.resizeListener = () => autoSizeAll(params, this.resizeListener))).bind(this)} onRowClicked={(params) => models.env[this.state.model].browse(null).then((record) => delete models.env.context.active_id).then(() => api.globals.app.views.main.router.navigate('/form/' + model + '?id=' + params.data.id))} onPaginationChanged={(params) => this.paging.bind(this)(params.api.paginationGetCurrentPage(), params)} onSortChanged={(params) => this.sort.bind(this)(params.api.getSortModel(), params)} onFilterChanged={(params) => this.filter.bind(this)(params.api.getFilterModel(), params)} onSelectionChanged={this.onSelectionChanged} paginationPageSize={this.state.limit} columnDefs={this.state.fields.filter((field) => !props.isTreeView && models.env.context.active_id && field.invisible instanceof Function ? !field.invisible({}, models.env.context.active_id) : !field.invisible)} rowData={this.state.records} frameworkComponents={this.state.frameworkComponents}/>\n        <Button onClick={this.addItem.bind(this)} style={{display: this.isEditable() && (props.create instanceof Function ? props.create(models.env.context.active_id) : props.create) !== false ? 'inline-block' : 'none', top: '-45px', backgroundColor: '#fff'}}>Add</Button>\n        <Button onClick={this.chooseItem.bind(this)} style={{display: choose && this.isEditable() ? 'inline-block' : 'none', top: '-45px', backgroundColor: '#fff'}}>Choose</Button>\n        <Button onClick={this.selectItem.bind(this)} style={{display: props.isPopup && this.state.selected.length > 0 ? 'inline-block' : 'none', top: '-45px', backgroundColor: '#fff'}}>Select</Button>\n        <Button onClick={this.exportItem.bind(this)} style={{display: props.isTreeView && this.state.selected.length > 0 ? 'inline-block' : 'none', top: '-45px', backgroundColor: '#fff'}}>Export</Button>\n        {!props.isPopup && window.tools.view[this.state.model] && window.tools.view[this.state.model].actions.tree && Object.entries(window.tools.view[this.state.model].actions.tree).map(([function_name, string]) => (\n          <Button onClick={(() => models.env[this.state.model].browse(this.state.active_ids).then((records) => records[function_name]()).then(() => this.gridOptions.api.deselectAll())).bind(this)} style={{display: (props.isTreeView || !models.env.context.editing) && this.state.selected.length > 0 ? 'inline-block' : 'none', top: '-45px', backgroundColor: '#fff'}}>{string}</Button>\n        ))}\n        <Button className=\"rapyd-tree-delete-button\" onClick={this.removeItem.bind(this)} style={{display: (props.isTreeView || this.isEditable()) && !props.isPopup && this.state.selected.length > 0 ? 'inline-block' : 'none', top: '-45px', backgroundColor: '#fff'}}>Delete</Button>\n        {!props.isTreeView && (props.parent_model || choose) &&\n        <Popup ref=\"popup_modal\" backdrop={false} animate={true}>{/* opened={this.state.popupOpened} onPopupClosed={() => this.setState({popupOpened : false})}>*/}\n          <Page popup title={window.tools.view[this.state.model] ? window.tools.view[this.state.model].string : 'Choose'}>\n            <div className=\"card rapyd-card-sheet\">\n              <Tree ref=\"popup\" isTreeView isPopup many2many={!!props.parent_model} parent_tree={this} active_field={this.state.tree_field} active_field_name={props.field_name} model={this.state.model} domain={(this.state.records.length > 0 ? [['id', 'not in', window.models.env.context.active_lines[props.model][(this.props.parent_model ? 'many2many_' : '') + this.state.tree_field].ids]] : []).concat(props.domain ? props.domain(models.env.context.active_id) : [])}>\n                {Array.prototype.slice.call(new DOMParser().parseFromString((window.tools.view[this.state.model] && window.tools.view[this.state.model].tree) || props.tree_arch || '<tree><field name=\"' + (window.models.env[this.state.model]._rec_name || 'name') + '\"/></tree>', 'text/xml').children[0].children).map((element) => {\n                  const props = {model};\n                  for (let attribute of element.attributes) {\n                    props[attribute.name] = attribute.value;\n                  }\n                  return React.createElement(null, props);\n                })}\n              </Tree>\n            </div>\n          </Page>\n        </Popup>\n        }\n      </div>\n    );\n    if (!props.isTreeView) api.wait(0).then(() => !this.pagingCalled && (this.pagingCalled = true) && this.paging(0, {newData: false, forceUpdate: true})/* : */.then(() => api.wait(1000)).then(() => this.pagingCalled = false));\n    if (!props.isTreeView || props.isPopup) {\n      if (window.models.env.context.editing) delete grid.props.children[0].props.onRowClicked;\n      return grid;\n    }\n    return (\n      <Page title={props.title || window.tools.view[this.state.model].string}>\n        <div className=\"card rapyd-card-sheet\">\n          <div className=\"card-header\">\n            <div className=\"data-table-title\">\n              {props.title || window.tools.view[this.state.model].string}\n              <br/>\n              <Button onClick={() => api.globals.app.views.main.router.navigate('/form/' + model)} style={{display: 'inline-block'}} fill>Create</Button>\n            </div>\n          </div>\n          {grid}\n        </div>\n      </Page>\n    );\n  }\n}\n","import React from 'react';\n//import Parser from 'react-jsx-parser';\nimport Tree from '../Tree';\n//import Field from '../Field';\n//import {transform as Parser} from 'babel-core';\n//import preset from '@babel/preset-react';\nimport api from 'api';\n\nconst customComponents = {Tree, Field: null};\n\nconst function_string =\n`if (!active_id) return false;\nvar context = window.models.env.context;\nvar True = true;\nvar False = false;\nvar None = null;\nreturn `;\n\n\nfunction parseView(view, model, title) {\n  view = new DOMParser().parseFromString(view, 'text/xml').children[0];\n  console.log(view);\n  if (title) view.setAttribute('title', title);\n  function recurse(elements, parent_props) {\n    let components = [];\n    for (let element of elements) {\n      const component = customComponents[element.tagName[0].toUpperCase() + element.tagName.toLowerCase().slice(1)] || customComponents[element.tagName] || element.tagName;\n      const props = {model, view_model: model};\n      for (let attribute of element.attributes) {\n        props[attribute.name] = attribute.value;\n      }\n      for (let attribute of ['invisible', 'required', 'readonly']) {\n        if (api.hasKey(props, attribute)) {\n          if (api.hasValue(['true', 'True'], props[attribute])) props[attribute] = true;\n          if (api.hasValue(['false', 'False'], props[attribute])) props[attribute] = false;\n          if (props[attribute].constructor === Boolean) continue;\n          if (api.hasValue(props[attribute], ' == ')) props[attribute] = props[attribute].replace('==', '===');\n          if (api.hasValue(props[attribute], ' != ')) props[attribute] = props[attribute].replace('!=', '!==');\n          if (api.hasValue(props[attribute], ' === ') || api.hasValue(props[attribute], ' !== ')) props[attribute] = new (Function.prototype.bind.apply(Function, [null, 'active_id', function_string + props[attribute]]))();\n        }\n      }\n      if (props.domain) props.domain = new (Function.prototype.bind.apply(Function, [null, 'active_id', function_string + '[' + props.domain + ']']))();\n      props.isTreeView = true;\n      const children = recurse(element.children, props) || [(() => element.innerHTML)];\n      components.push(() => React.createElement(component, props, children.map((result) => result())));\n    }\n    if (!components.length) return null;\n    return components\n  }\n  return recurse([view], true)[0];\n}\n\nconst cachedViews = {};\n\nfunction render(props) {\n  let model = window.models.env.context.active_model;\n  if (props.f7route && props.f7route.url) window.models.env.context.active_url = props.f7route.url;\n  else window.models.env.context.active_url = '/';\n  window.models.env.context.active_id = null;\n  if (props.f7route && props.f7route.params && props.f7route.params.model) {\n    model = props.f7route.params.model;\n  }/* else {\n    window.models.env.context.active_url = '/';\n  }*/\n  const mode = 'tree';\n  this.model = model;\n  this.mode = mode;\n  const view = window.tools.view[model].tree;\n  window.models.env.context.active_model = model;\n\n  if (!cachedViews[view + (props.title ? '-' + props.title : '')]) {\n    // eslint-disable-next-line\n    //cachedViews[view] = evals(Parser(view, {presets: [preset]}).code);\n    cachedViews[view + (props.title ? '-' + props.title : '')] = parseView(view, model, props.title);\n  }\n\n  //if (window.tools.view[model].custom_init && window.tools.view[model].custom_init[model + '.' + mode]) window.tools.view[model].custom_init[model + '.' + mode].bind(this)(props);\n\n  return cachedViews[view + (props.title ? '-' + props.title : '')]();\n\n  /*return (\n    <Parser components={{Tree}} jsx={view} renderInWrapper={false}/>\n  );*/\n}\n\nexport default class extends React.Component {\n  componentDidMount() {\n    const model = this.model, mode = this.mode;\n    if (window.tools.view[model].custom_init && window.tools.view[model].custom_init[model + '.' + mode]) window.tools.view[model].custom_init[model + '.' + mode].bind(this)(this.props);\n  }\n\n  render = render;\n\n}\n","import React from 'react';\nimport Page from './Page';\nimport {Button} from 'framework7-react';\nimport api from 'api';\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n\n    //const model = window.models.env.context.active_model;\n    const models = window.models;\n    //const active_id = window.models.env.context.active_id || null;\n    models.env.context.editing = props.isCustomView ? true : false;\n    //models.env.context.new_value = {};\n    this.state = models.env.context;//{editing: false, active_id: active_id};\n    this.state.edit_function = this.edit.bind(this);\n  }\n\n  async componentDidMount(props) {\n    const model = window.models.env.context.active_model;\n    const models = window.models;\n    models.env.context.active_lines = {};\n    models.env.context.active_task = [];\n    const form = this;\n    if (!models.env.context.active_ids || models.env.context.active_ids.length < 1 || !models.env.context.active_ids[0]) {\n      models.env.context.active_id = models.env[model].browse();\n      await window.models.env.context.active_id._wait_promise();\n      models.env.context.editing = true;\n      return this.setState(models.env.context);\n    }\n    //else if (!models.env.context.active_id) {\n    models.env.context.active_id = await models.env[model].browse(models.env.context.active_ids);\n    //}\n    return models.env.context.refresh();\n    //api.globals.app.views.main.router.refreshPage();\n  }\n\n  async edit() {\n    await api.wait_exist(() => !api.globals.onchange_running);\n    const models = window.models;\n    const model = models.env.context.active_id._name;\n    const offline = this.props.offline ? JSON.parse(this.props.offline) : false;\n    if (!this.state.editing) {\n      models.env.context.editing = true;\n      return await this.setState({...models.env.context, offline});\n    }\n    const operation = models.env.context.active_id.id ? 'write' : 'create';\n    try {\n      await models.env.context.active_id[operation]({}, !offline);\n    }\n    catch(error) {\n      if (error && error.constructor === window.tools.exceptions.RequiredError) {\n        error.field_map = {};\n        for (let field of error.fields) {\n          error.field_map[field] = true;\n        }\n        models.env.context.active_error = error;\n        await this.setState({active_id: models.env.context.active_id});\n        api.globals.app.toast.create({text: 'Some fields are required', closeButton: false, closeTimeout: 2000, position: 'center'}).open();\n        return;\n      }\n      else {\n        throw error;\n      }\n    }\n    for (let task of models.env.context.active_task) {\n      const result = task();\n      if (result && result.constructor === Promise) await result;\n    }\n    models.env.context.active_task = [];\n    if (operation === 'create') {\n      api.globals.app.views.main.router.navigate(window.location.hash.replace('#!', '') + '?id=' + models.env.context.active_id.id, {reloadCurrent: true});\n      const promises = [];\n      for (let model in models.env.context.active_lines) {\n        for (let inverse_field in models.env.context.active_lines[model]) {\n          if (inverse_field.slice(0, 10) === 'many2many_') continue;\n          promises.push(models.env.context.active_lines[model][inverse_field].write({[inverse_field]: models.env.context.active_id.id}));\n        }\n      }\n      await Promise.all(promises);\n    }\n    if (!this.props.isCustomView) models.env.context.editing = false;\n    if (offline) models.env.context.unsaved = {...models.env.context.unsaved, [model]: {...(models.env.context.unsaved && models.env.context.unsaved[model]), [models.env.context.active_id.id]: models.env.context.active_id.id}};\n    await api.update_session({unsaved: models.env.context.unsaved});\n    await this.setState({...models.env.context, offline});\n    //api.globals.app.views.main.router.refreshPage();\n  }\n\n  async upload() {\n    await api.wait_exist(() => !api.globals.onchange_running);\n    const models = window.models;\n    const model = models.env.context.active_id._name;\n    let record = await models.env[model].browse(models.env.context.active_id.id);\n    if (record.length < 1) {\n      let old_record = record;\n      record = await record.create();\n      await old_record.unlink(false);\n      models.env.context.active_id = record;\n    }\n    else {\n      record = await models.env.context.active_id.write();\n      models.env.context.active_id = record;\n    }\n    if (models.env.context.unsaved && models.env.context.unsaved[model] && models.env.context.unsaved[model][record.id]) delete models.env.context.unsaved[model][record.id];\n    await api.update_session({unsaved: models.env.context.unsaved});\n    return await this.setState({...models.env.context, offline: false});\n  }\n\n  render(props) {\n    const model = window.models.env.context.active_model;\n    console.log(this.state);\n    //const models = window.models;\n    const buttonStyle = {width: 'auto', float: 'left', 'margin-right': '10px'};\n    const uploadStyle = {};\n    if (!this.state.offline) uploadStyle['display'] = 'none';\n    if (props.isCustomView) return (<Page title={window.tools.view[model].string}>{props.children}</Page>);\n    return (\n      <Page title={window.tools.view[model].string}>\n        <div className=\"card\" style={{margin: 0, boxShadow: 'none'}}>\n          <div className=\"card-header\" style={{borderRight: 'solid rgba(0,0,0,0.05) 0.5px'}}>\n            <div className=\"data-table-title\">\n              {window.tools.view[model].string}\n              <span style={{color: '#666666'}}>{' / ' + (this.state.active_id && this.state.active_id.id ? this.state.active_id.name : 'New')}</span>\n              <div>\n                <Button onClick={() => this.edit().catch(api.handleClientError)} style={buttonStyle} fill>{this.state.editing ? 'Save' : 'Edit'}</Button>\n                <Button onClick={() => api.globals.app.views.main.router.back()} style={{...buttonStyle, ...(!this.state.editing ? {display: 'none'} : {})}}>{'Cancel'}</Button>\n                <Button onClick={this.upload.bind(this)} style={{...buttonStyle, ...uploadStyle}} fill>{'Upload'}</Button>\n              </div>\n            </div>\n          </div>\n          {props.children}\n        </div>\n      </Page>\n    );\n  }\n}\n","import React from 'react';\n\nexport default (props) => (\n  <div style={{margin: 0, backgroundColor: '#8F8F8F', 'minHeight': '56px', ...((props.invisible instanceof Function ? props.invisible(window.models.env.context.active_id) : props.invisible) ? {display: 'none'} : {})}}>\n    {props.children}\n  </div>\n)\n","import React from 'react';\nimport {\n    Button,\n} from 'framework7-react';\nimport api from 'api';\n\nasync function button(props) {\n  await api.wait_exist(() => !api.globals.onchange_running);\n  //const load = api.preload();\n  if (props.name) {\n    try {\n      if (window.models.env.context.editing) {\n        await window.models.env.context.edit_function();\n      }\n      if (!window.models.env.context.active_error) {\n        await window.models.env.context.active_id[props.name]();\n        await window.models.env.context.refresh();\n      }\n    }\n    catch(error) {\n      //console.log(error);\n      await window.models.env.context.refresh();\n      api.handleClientError(error);\n      throw error;\n      //await api.globals.app.views.main.router.refreshPage();\n    }\n  }\n  //load.done();\n}\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = window.models.env.context;\n  }\n\n  render(props) {\n    return (\n      <Button fill onClick={() => button.bind(this)(props)} style={{display: (props.invisible instanceof Function ? props.invisible(window.models.env.context.active_id) : props.invisible) ? 'none' : 'block', float: 'left', width: 'auto', margin: '10px'}}>{props.string}</Button>\n    );\n  }\n}\n","import React from 'react';\n\nexport default class extends React.Component {\n\n  render(props) {\n    return (\n      <div className=\"card rapyd-card-sheet\" style={{minHeight: '250px', marginTop: '20px'}}>\n        <div className=\"card-content form-sheet\" style={{'display': 'flex', 'flex-wrap': 'wrap'}}>\n          {props.children}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport {BlockTitle} from 'framework7-react';\nimport api from 'api';\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n    //this.state.lastHeight = 0.0;\n    this.state.previousTitle = false;\n  }\n\n  async componentDidMount() {\n    await api.wait_exist(() => this.refs.group);\n    await api.wait(0);\n    if (!this.props.title) {\n      let index = 0\n      for (let element of [this.refs.group.previousElementSibling, this.refs.group.nextElementSibling]) {\n        if (element && (!index ? element.offsetLeft === 0 : element.offsetLeft > 0) && element.querySelector('div.component-group-title')) {\n          this.setState({previousTitle: true});\n          break;\n        }\n        index += 1;\n      }\n    }\n    /*if (this.props.children || this.refs.group.previousElementSibling === null || this.refs.group.previousElementSibling.offsetLeft !== 0) {\n      return;\n    }\n    this.interval = setInterval(() => {\n      if (!this.refs.group || !this.refs.group.previousElementSibling) return clearInterval(this.interval);\n      const lastHeight = this.refs.group.previousElementSibling.clientHeight - 20;\n      if (lastHeight !== this.state.lastHeight) {\n        this.setState({lastHeight: lastHeight});\n      }\n    }, 500);*/\n  }\n\n  componentWillUnmount() {\n    if (this.interval) clearInterval(this.interval);\n  }\n\n  render(props) {\n    if (props.width && props.width.slice(-1) === '%' && parseInt(props.width.slice(0, -1)) > 97) {\n      props.width = '97%';\n    }\n    return (\n      <div ref=\"group\" className=\"component-group\" style={{float: 'left', width: props.width, padding: '10px', marginTop: '20px', height: 'auto', ...((props.invisible instanceof Function ? props.invisible(window.models.env.context.active_id) : props.invisible) ? {position: 'absolute', left: '-9999px', top: '-9999px'} : {})}}>\n        {(props.title || this.state.previousTitle) && (\n          <BlockTitle className=\"component-group-title\" style={{'fontSize': '25px', 'lineHeight': 'unset', ...(this.state.previousTitle ? {'height': '37px'} : {})}}>{props.title || ''}</BlockTitle>\n        )}\n        {props.children}\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nexport default class extends React.Component {\n\n  render(props) {\n    return (\n      <div className=\"card\" style={{margin: 0, boxShadow: 'none', padding: '20px', minHeight: '30%', marginTop: '30px', ...((props.invisible instanceof Function ? props.invisible(window.models.env.context.active_id) : props.invisible) ? {display: 'none'} : {})}}>\n        <div className=\"card-header\">\n          {props.children}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport Form from '../Form';\nimport Header from '../Header';\nimport Button from '../Button';\nimport Sheet from '../Sheet';\nimport Group from '../Group';\nimport Field from '../Field';\nimport Tree from '../Tree';\nimport Footer from '../Footer';\n//import {transform as Parser} from 'babel-core';\n//import preset from '@babel/preset-react';\nimport api from 'api';\n\nwindow.rapydComponents = {...window.rapydComponents, Form, Header, Button, Sheet, Group, Field, Tree, Footer};\n\nconst function_string =\n`if (!active_id) return false;\nvar context = window.models.env.context;\nvar True = true;\nvar False = false;\nvar None = null;\nreturn `;\n\nfunction parseView(view, model) {\n  const customComponents = {...window.rapydComponents, Form, Header, Button, Sheet, Group, Field, Tree, Footer};\n  view = new DOMParser().parseFromString(view, 'text/xml').children[0];\n  function recurse(elements, parent_props) {\n    let components = [];\n    for (let element of elements) {\n      const component = api.hasValue(element.tagName, '-') ? customComponents[element.tagName.split('-').map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase()).join('')] : null || customComponents[element.tagName[0].toUpperCase() + element.tagName.toLowerCase().slice(1)] || customComponents[element.tagName] || element.tagName;\n      const props = {model};\n      for (let attribute of element.attributes) {\n        props[attribute.name] = attribute.value;\n      }\n      for (let attribute of ['invisible', 'required', 'readonly', 'create', 'choose']) {\n        if (api.hasKey(props, attribute)) {\n          if (api.hasValue(['true', 'True'], props[attribute])) props[attribute] = true;\n          if (api.hasValue(['false', 'False'], props[attribute])) props[attribute] = false;\n          if (props[attribute].constructor === Boolean) continue;\n          if (api.hasValue(props[attribute], ' == ')) props[attribute] = props[attribute].replace('==', '===');\n          if (api.hasValue(props[attribute], ' != ')) props[attribute] = props[attribute].replace('!=', '!==');\n          if (api.hasValue(props[attribute], ' === ') || api.hasValue(props[attribute], ' !== ')) props[attribute] = new (Function.prototype.bind.apply(Function, [null, 'active_id', 'parent', function_string + props[attribute]]))();\n        }\n      }\n      if (props.domain) props.domain = new (Function.prototype.bind.apply(Function, [null, 'active_id', 'parent', function_string + '[' + props.domain + ']']))();\n      if (component === Tree) {\n        const field = window.models.env[model]._fields[parent_props.name];\n        props.view_model = model;\n        props.field_name = parent_props.name;\n        props.model = field.relation;\n        props.field = field.type === 'one2many' ? field.inverse : parent_props.name;\n        if (field.type !== 'one2many') {\n          props.parent_model = model;\n          props.tree_arch = element.outerHTML;\n        }\n        if (parent_props.invisible) props.invisible = parent_props.invisible;\n        if (parent_props.domain) props.domain = parent_props.domain;\n      }\n      const children = recurse(element.children, props) || [(() => element.innerHTML)];\n      components.push(() => React.createElement(component, props, children.map((result) => result())));\n    }\n    if (!components.length) return null;\n    return components\n  }\n  return recurse([view])[0];\n}\n\nconst cachedViews = {};\n\nexport default class extends React.Component {\n  componentDidUpdate() {\n    if (this.afterMount) {\n      delete this.afterMount;\n      return;\n    }\n    const model = this.model, mode = this.mode;\n    if (window.tools.view[model].custom_init && window.tools.view[model].custom_init[model + '.' + mode]) window.tools.view[model].custom_init[model + '.' + mode].bind(this)(this.props);\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate();\n    this.afterMount = true;\n    api.wait(1000).then(() => this.afterMount = false);\n    return;\n  }\n\n  render(props) {\n    const refresh = () => this.setState({});\n    this.refresh = refresh.bind(this);\n    window.models.env.context.refresh = this.refresh;\n    let model = window.models.env.context.active_model;\n    if (props.f7route && props.f7route.url) window.models.env.context.active_url = props.f7route.url;\n    else window.models.env.context.active_url = '/';\n    if (props.f7route && props.f7route.params && props.f7route.params.model) {\n      model = props.f7route.params.model;\n    }\n    const mode = 'form';\n    this.model = model;\n    this.mode = mode;\n    const id = props.f7route.query.id;\n    const view = window.tools.view[model].form;\n    window.models.env.context.active_model = model;\n    if (id) {\n      window.models.env.context.active_ids = [id];\n      //delete window.models.env.context.active_id;\n    }\n    else {\n      delete window.models.env.context.active_ids;\n    }\n    /*if (id) {\n      window.models.env[model].browse(id).then((record) => window.models.env.context.active_id = record);\n    }*/\n    if (!cachedViews[view]) {\n      // eslint-disable-next-line\n      //cachedViews[view] = eval(Parser(view, {presets: [preset]}).code);\n      cachedViews[view] = parseView(view, model);\n    }\n\n    //if (window.tools.view[model].custom_init && window.tools.view[model].custom_init[model + '.' + mode]) window.tools.view[model].custom_init[model + '.' + mode].bind(this)(this.props);\n\n    return cachedViews[view]();\n  }\n}\n","import React from 'react';\nimport Form from '../Form';\nimport Header from '../Header';\nimport Button from '../Button';\nimport Sheet from '../Sheet';\nimport Group from '../Group';\nimport Field from '../Field';\nimport Tree from '../Tree';\nimport Footer from '../Footer';\nimport TreePage from './TreePage';\n//import {transform as Parser} from 'babel-core';\n//import preset from '@babel/preset-react';\nimport api from 'api';\n\nwindow.rapydComponents = {...window.rapydComponents, TreePage, Form, Header, Button, Sheet, Group, Field, Tree, Footer};\n\nconst function_string =\n`if (!active_id) return false;\nvar context = window.models.env.context;\nvar True = true;\nvar False = false;\nvar None = null;\nreturn `;\n\nfunction parseView(view, model) {\n  const customComponents = {...window.rapydComponents, TreePage, Form, Header, Button, Sheet, Group, Field, Tree, Footer};\n  view = new DOMParser().parseFromString(view, 'text/xml').children[0];\n  function recurse(elements, parent_props) {\n    let components = [];\n    for (let element of elements) {\n      const component = api.hasValue(element.tagName, '-') ? customComponents[element.tagName.split('-').map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase()).join('')] : null || customComponents[element.tagName[0].toUpperCase() + element.tagName.toLowerCase().slice(1)] || customComponents[element.tagName] || element.tagName;\n      const props = {model};\n      for (let attribute of element.attributes) {\n        props[attribute.name] = attribute.value;\n      }\n      for (let attribute of ['invisible', 'required', 'readonly']) {\n        if (api.hasKey(props, attribute)) {\n          if (api.hasValue(['true', 'True'], props[attribute])) props[attribute] = true;\n          if (api.hasValue(['false', 'False'], props[attribute])) props[attribute] = false;\n          if (props[attribute].constructor === Boolean) continue;\n          if (api.hasValue(props[attribute], ' == ')) props[attribute] = props[attribute].replace('==', '===');\n          if (api.hasValue(props[attribute], ' != ')) props[attribute] = props[attribute].replace('!=', '!==');\n          if (api.hasValue(props[attribute], ' === ') || api.hasValue(props[attribute], ' !== ')) props[attribute] = new (Function.prototype.bind.apply(Function, [null, 'active_id', function_string + props[attribute]]))();\n        }\n      }\n      if (props.domain) props.domain = new (Function.prototype.bind.apply(Function, [null, 'active_id', function_string + '[' + props.domain + ']']))();\n      if (component === Tree) {\n        const field = window.models.env[model]._fields[parent_props.name];\n        props.view_model = model;\n        props.field_name = parent_props.name;\n        props.model = field.relation;\n        props.field = field.type === 'one2many' ? field.inverse : parent_props.name;\n        if (field.type !== 'one2many') {\n          props.parent_model = model;\n          props.tree_arch = element.outerHTML;\n        }\n        if (parent_props.invisible) props.invisible = parent_props.invisible;\n        if (parent_props.domain) props.domain = parent_props.domain;\n      }\n      props.isCustomView = true;\n      const children = recurse(element.children, props) || [(() => element.innerHTML)];\n      components.push(() => React.createElement(component, props, children.map((result) => result())));\n    }\n    if (!components.length) return null;\n    return components\n  }\n  return recurse([view])[0];\n}\n\nconst cachedViews = {};\n\nexport default class extends React.Component {\n  componentDidUpdate() {\n    if (this.afterMount) {\n      delete this.afterMount;\n      return;\n    }\n    const model = this.model, mode = this.mode;\n    if (window.tools.view[model].custom_init && window.tools.view[model].custom_init[model + '.' + mode]) window.tools.view[model].custom_init[model + '.' + mode].bind(this)(this.props);\n  }\n\n  componentDidMount() {\n    this.componentDidUpdate();\n    this.afterMount = true;\n    api.wait(1000).then(() => this.afterMount = false);\n    return;\n  }\n\n  render(props) {\n    const refresh = () => this.setState({});\n    this.refresh = refresh.bind(this);\n    window.models.env.context.refresh = this.refresh;\n    let model = window.models.env.context.active_model;\n    let mode = window.models.env.context.active_mode;\n    if (props.f7route && props.f7route.url) window.models.env.context.active_url = props.f7route.url;\n    else window.models.env.context.active_url = '/';\n    if (props.f7route && props.f7route.params && props.f7route.params.view_id) {\n      const view_id = props.f7route.params.view_id.split('.');\n      model = view_id.slice(0, -1).join('.');\n      mode = view_id[view_id.length - 1];\n      //window.models.env.context.active_url = props.f7route.url;\n    }\n    this.model = model;\n    this.mode = mode;\n    //const id = props.f7route.query.id;\n    const view = window.tools.view[model][mode];\n    if (window.tools.view[model].contexts[mode]) Object.assign(window.models.env.context, window.tools.view[model].contexts[mode]);\n    window.models.env.context.active_model = model;\n    //window.models.env.context.active_ids = [id];\n    /*if (id) {\n      window.models.env[model].browse(id).then((record) => window.models.env.context.active_id = record);\n    }*/\n    const id = props.f7route && props.f7route.query.id;\n    if (id) {\n      window.models.env.context.active_ids = [id];\n      //delete window.models.env.context.active_id;\n    }\n    else {\n      delete window.models.env.context.active_ids;\n    }\n    if (!cachedViews[view]) {\n      // eslint-disable-next-line\n      //cachedViews[view] = eval(Parser(view, {presets: [preset]}).code);\n      cachedViews[view] = parseView(view, model);\n    }\n\n    //if (window.tools.view[model].custom_init && window.tools.view[model].custom_init[model + '.' + mode]) window.tools.view[model].custom_init[model + '.' + mode].bind(this)(props);\n\n    return cachedViews[view]();\n  }\n}\n","import React from 'react';\nimport {\n    Page,\n    Navbar,\n    NavLeft,\n    NavTitle,\n    NavRight,\n    Link,\n    Toolbar,\n    Block,\n    BlockTitle,\n    List,\n    ListItem,\n    Row,\n    Col,\n    Button\n} from 'framework7-react';\nimport LoginPage from './LoginPage';\nimport TreePage from './TreePage';\nimport FormPage from './FormPage';\nimport CustomPage from './CustomPage';\n//import api from 'api';\n\nexport default function (props) {\n\n  if (window.models === undefined) {\n    return (<LoginPage/>);\n  }\n  else if (window.tools.configuration.home_view) {\n    const mode = window.tools.configuration.home_view.split('.').slice(-1)[0];\n    const model = window.tools.configuration.home_view.split('.').slice(0, -1).join('.');\n    window.models.env.context.active_mode = mode;\n    window.models.env.context.active_model = model;\n    if (mode === 'tree') {\n      return (<TreePage/>);\n    }\n    else if (mode === 'form') {\n      return (<FormPage/>);\n    }\n    else if (mode !== 'chat') return (<CustomPage/>);\n  }\n\n  return (\n  <Page>\n    <Navbar>\n      <NavLeft>\n        <Link iconMd=\"material:menu\" panelOpen=\"left\"></Link>\n      </NavLeft>\n      <NavTitle>Home</NavTitle>\n      <NavRight>\n        <Link iconMd=\"material:person\" panelOpen=\"right\"></Link>\n      </NavRight>\n    </Navbar>\n    <Toolbar>\n      <Link>Left Link</Link>\n      <Link>Right Link</Link>\n    </Toolbar>\n    <Block strong>\n      <p>Here is your blank Framework7 app. Let's see what we have here.</p>\n    </Block>\n    <BlockTitle>Navigation</BlockTitle>\n    <List>\n      <ListItem link=\"/about/\" title=\"About\"></ListItem>\n      <ListItem link=\"/form/\" title=\"Form\"></ListItem>\n    </List>\n    <BlockTitle>Modals</BlockTitle>\n    <Block strong>\n      <Row>\n        <Col width=\"50\">\n          <Button fill raised popupOpen=\"#popup\">Popup</Button>\n        </Col>\n        <Col width=\"50\">\n          <Button fill raised loginScreenOpen=\"#login-screen\">Login Screen</Button>\n        </Col>\n      </Row>\n    </Block>\n    <BlockTitle>Panels</BlockTitle>\n    <Block strong>\n      <Row>\n        <Col width=\"50\">\n          <Button fill raised panelOpen=\"left\">Left Panel</Button>\n        </Col>\n        <Col width=\"50\">\n          <Button fill raised panelOpen=\"right\">Right Panel</Button>\n        </Col>\n      </Row>\n    </Block>\n    <List>\n      <ListItem link=\"/dynamic-route/blog/45/post/125/?foo=bar#about\" title=\"Dynamic Route\"></ListItem>\n      <ListItem link=\"/load-something-that-doesnt-exist/\" title=\"Default Route (404)\"></ListItem>\n    </List>\n  </Page>\n  );\n}\n","import React from 'react';\nimport { Page, Navbar, Link, Block, BlockTitle } from 'framework7-react';\n\nexport default () => (\n  <Page>\n    <Navbar title=\"About\" backLink=\"Back\"></Navbar>\n    <BlockTitle>About My App</BlockTitle>\n    <Block strong>\n      <p>Here is About page!</p>\n      <p>You can go <Link back>back</Link>.</p>\n      <p>Mauris posuere sit amet metus id venenatis. Ut ante dolor, tempor nec commodo rutrum, varius at sem. Nullam ac nisi non neque ornare pretium. Nulla mauris mauris, consequat et elementum sit amet, egestas sed orci. In hac habitasse platea dictumst.</p>\n      <p>Fusce eros lectus, accumsan eget mi vel, iaculis tincidunt felis. Nulla tincidunt pharetra sagittis. Fusce in felis eros. Nulla sit amet aliquam lorem, et gravida ipsum. Mauris consectetur nisl non sollicitudin tristique. Praesent vitae metus ac quam rhoncus mattis vel et nisi. Aenean aliquet, felis quis dignissim iaculis, lectus quam tincidunt ligula, et venenatis turpis risus sed lorem. Morbi eu metus elit. Ut vel diam dolor.</p>\n    </Block>\n  </Page>\n);\n","import React from 'react';\nimport { Page, Navbar, Block } from 'framework7-react';\n\nexport default () => (\n  <Page>\n    <Navbar title=\"Not found\" backLink=\"Back\" />\n    <Block strong>\n      <p>Sorry</p>\n      <p>Requested content not found.</p>\n    </Block>\n  </Page>\n);\n","import React from 'react';\nimport {Page, Navbar, Button, Link} from 'framework7-react';\n\nimport api from 'api';\n\nlet hide = false;\n\nfunction hidePanel() {\n  api.globals.app.params.panel.leftBreakpoint = hide ? 768 : 1000000;\n  api.globals.app.panel.left.initBreakpoints();\n  hide = !hide;\n}\n\nexport default () => (\n  <Page>\n    <Navbar title=\"Menu\"/>\n    <div id=\"menu\" className=\"list list-block media-list chevron-center inset\" style={{fontWeight: 500}} panelClose>\n      {window.tools.keys(window.tools.menu, 'sequence').as_array().map((menu, index) => (\n      <ul>\n        <li className=\"accordion-item\">\n          <a className={'item-link item-content' + (window.tools.menu[menu].childs.length < 1 ? ' panel-close external' : '')} onClick={window.tools.menu[menu].childs.length < 1 && ((event) => event.preventDefault() || api.globals.app.panel.left.close() === {} || Object.assign(window.models.env.context, window.tools.menu[menu].context) === {} || api.globals.app.views.main.router.navigate(event.currentTarget.href.split('#!')[1]))} href={window.tools.menu[menu].childs.length < 1 && '#!/' + (window.tools.menu[menu].view_id ? 'view' : 'tree') + '/' + (window.tools.menu[menu].view_id || window.tools.menu[menu].model)} data-view=\"#main-view\">\n            <div className=\"item-inner\">\n              <div className=\"item-title\">{window.tools.menu[menu].string}</div>\n            </div>\n          </a>\n          {window.tools.menu[menu].childs.as_array().map((child_menu, index) => (\n          <div className=\"accordion-item-content\">\n            <a className=\"item-content panel-close external\" onClick={(event) => event.preventDefault() || api.globals.app.panel.left.close() === {} || Object.assign(window.models.env.context, child_menu.context) === {} || api.globals.app.views.main.router.navigate(event.currentTarget.href.split('#!')[1])} href={'#!/' + (child_menu.view_id ? 'view' : 'tree') + '/' + (child_menu.view_id || child_menu.model)} data-view=\"#main-view\">\n              <div className=\"item-inner\">\n                <div className=\"item-title\">{child_menu.string}</div>\n              </div>\n            </a>\n          </div>))}\n        </li>\n      </ul>))}\n    </div>\n    <Button fill id=\"pwa_install_button\" onClick={async () => api.globals.InstallPromp.prompt() || (await api.globals.InstallPromp.userChoice === 'accepted') && (document.getElementById('pwa_install_button').style.display = 'none')} style={{display: api.globals.InstallPrompt ? 'inline-block' : 'none', margin: '10px'}}>Install</Button>\n    <Link iconMd=\"material:more_horiz\" iconSize=\"30\" onClick={hidePanel} style={{display: 'inline-block', margin: '10px'}}/>\n  </Page>\n);\n","import React from 'react';\nimport api from 'api';\nimport { Page, Navbar, NavLeft, Block, Button, BlockTitle, List, ListItem, Icon, Toolbar, Link, Tabs, Tab } from 'framework7-react';\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {'name': ''};\n  }\n\n  async componentDidMount(props) {\n    api.globals.app = this.$f7;\n    if (api.globals.app.device.ios) {\n      let color = document.querySelector('meta[name=theme-color]').content;\n      let style = document.createElement('style');\n      style.innerHTML = '#framework7-root {padding-top: 24px !important; background-color: ' + color + ' !important} .panel {padding-top: 24px !important; background-color: ' + color + ' !important}';\n      document.querySelector('head').append(style);\n    }\n    window.tools.navigate = api.globals.app.views.main.router.navigate.bind(api.globals.app.views.main.router);\n    window.tools.dialog = api.globals.app.dialog;\n    this.setState({'name': await window.models.env.user.browse(window.models.env.user.id.toString()).then((record) => record.name)});\n  }\n\n  render = (props) => (\n    <Page>\n      <Navbar>\n        <NavLeft className=\"user-link\">\n          <List>\n            <ListItem link=\"#\" title={this.state.name}>\n              <Icon material=\"person\"></Icon>\n            </ListItem>\n          </List>\n        </NavLeft>\n      </Navbar>\n      <Toolbar tabbar>\n        <Link tabLink=\"#notification\" tabLinkActive>Notifications</Link>\n        {/*<Link tabLink=\"#message\">Messages</Link>*/}\n      </Toolbar>\n      <Tabs>\n        <Tab id=\"notification\" className=\"page-content\" tabActive style={{paddingTop: '0px'}}>\n          <List mediaList style={{marginTop: '0px'}}>\n            <ListItem link=\"#\" title=\"Notification Title\" after=\"17:20\" text=\"Notification Text\"/>\n          </List>\n          <Button fill onClick={api.logout} style={{display: 'inline-block', margin: '10px'}}>Logout</Button>\n        </Tab>\n        {/*<Tab id=\"message\" className=\"page-content\">\n          <Block>\n            <p>Tab 2 content</p>\n            ...\n          </Block>\n        </Tab>*/}\n      </Tabs>\n      {/*<Block strong>\n        <p>Right panel content goes here</p>\n      </Block>\n      <BlockTitle>Load page in panel</BlockTitle>\n      <List>\n        <ListItem link=\"/about/\" title=\"About\"></ListItem>\n        <ListItem link=\"/form/\" title=\"Form\"></ListItem>\n      </List>\n      <BlockTitle>Load page in main view</BlockTitle>\n      <List>\n        <ListItem link=\"/about/\" title=\"About\" view=\"#main-view\" panelClose></ListItem>\n        <ListItem link=\"/form/\" title=\"Form\" view=\"#main-view\" panelClose></ListItem>\n      </List>*/}\n    </Page>\n  )\n}\n","import HomePage from './components/pages/HomePage';\nimport AboutPage from './components/pages/AboutPage';\nimport TreePage from './components/pages/TreePage';\nimport FormPage from './components/pages/FormPage';\nimport CustomPage from './components/pages/CustomPage';\nimport NotFound from './components/pages/NotFound';\nimport PanelLeft from './components/pages/PanelLeft';\nimport PanelRight from './components/pages/PanelRight';\n\nconst routes = () => window.models ? [\n  {\n    path: '/',\n    component: HomePage,\n  },\n  {\n    path: '/panel-left/',\n    component: PanelLeft,\n  },\n  {\n    path: '/panel-right/',\n    component: PanelRight,\n  },\n  {\n    path: '/about/',\n    component: AboutPage,\n  },\n  {\n    path: '/tree/:model',\n    component: TreePage,\n  },\n  {\n    path: '/form/:model',\n    component: FormPage,\n  },\n  {\n    path: '/view/:view_id',\n    component: CustomPage,\n  },\n  {\n    path: '(.*)',\n    component: NotFound,\n  },\n] : [{path: '(.*)', component: HomePage}];\n\nexport default routes;\n","import React from 'react';\nimport {\n  App,\n  Panel,\n  View,\n  Statusbar,\n  Popup,\n  Page,\n  Navbar,\n  NavRight,\n  Link,\n  Block,\n  LoginScreen,\n  LoginScreenTitle,\n  List,\n  ListItem,\n  Label,\n  Input,\n  ListButton,\n  BlockFooter\n} from 'framework7-react';\n\nimport routes from '../routes';\n\nimport api from 'api';\n\nexport default function (props) {\n  const tools = window.tools;\n\n  const manifest = tools ? {\n    \"short_name\": tools.configuration.app_name || \"App\",\n    \"name\": tools.configuration.long_name || tools.configuration.app_name || \"App\",\n    \"description\": tools.configuration.app_description || \"A webclient for Rapydframework based apps\",\n    \"scope\": ((href) => href.substring(0, href.lastIndexOf('/')) + '/')(window.location.origin + window.location.pathname),\n    \"start_url\": ((href) => href.substring(0, href.lastIndexOf('/')) + '/')(window.location.origin + window.location.pathname) + '/index.html',\n    \"display\": 'standalone',\n    \"background_color\": 'white',\n    \"icons\": [{\n      \"src\": ((href) => href.substring(0, href.lastIndexOf('/')) + '/')(window.location.origin + window.location.pathname) + '/' + (tools.configuration.icon_big || \"icon-512.png\"),\n      \"sizes\": \"512x512\",\n      \"type\": \"image/png\"\n    },\n    {\n      \"src\": ((href) => href.substring(0, href.lastIndexOf('/')) + '/')(window.location.origin + window.location.pathname) + '/' + (tools.configuration.icon_small || \"icon-192.png\"),\n      \"sizes\": \"192x192\",\n      \"type\": \"image/png\"\n    }],\n  } : null;\n\n  let manifestRegistered = false;\n  api.globals.registerManifest = async () => {\n    if (manifestRegistered || !tools || !window.fetch) return;\n    let validManifest;\n    try {\n      const manifest_json = await fetch(document.getElementById('rapyd-app-manifest').href).then((result) => result.json());\n      if (manifest_json.start_url) validManifest = true;\n    }\n    catch (error) {}\n    if (validManifest) return;\n    manifest.theme_color = document.querySelector('meta[name=theme-color]').content;\n    const blob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});\n    document.getElementById('rapyd-app-manifest').setAttribute('href', URL.createObjectURL(blob));\n    manifestRegistered = true;\n  }\n\n  const f7params = {\n    id: 'org.rapyd.client', // App bundle ID\n    name: 'App', // App name\n    theme: 'md', // Automatic theme detection\n    // App routes\n    routes: routes(),\n    panel: {\n      swipe: 'left',\n      leftBreakpoint: 960,\n      swipeThreshold: 230,\n    },\n  };\n\n  return (\n    <App params={f7params} colorTheme={(window.tools && window.tools.configuration.color_theme) ? (window.tools && window.tools.configuration.color_theme) : 'gray'}>\n      {/* Statusbar */}\n      <Statusbar />\n\n      { window.models !== undefined &&\n        <Panel left reveal>\n          <View url=\"/panel-left/\" />\n        </Panel>\n      }\n\n      { window.models !== undefined &&\n        <Panel right cover>\n          <View url=\"/panel-right/\"/>\n        </Panel>\n      }\n\n      {/* Main View */}\n      <View id=\"main-view\" url=\"/\" main className=\"ios-edges\" preloadPreviousPage={false} pushState/>\n\n      {/*\n      <Popup id=\"popup\">\n        <View>\n          <Page>\n            <Navbar title=\"Popup\">\n              <NavRight>\n                <Link popupClose>Close</Link>\n              </NavRight>\n            </Navbar>\n            <Block>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Neque, architecto. Cupiditate laudantium rem nesciunt numquam, ipsam. Voluptates omnis, a inventore atque ratione aliquam. Omnis iusto nemo quos ullam obcaecati, quod.</Block>\n          </Page>\n        </View>\n      </Popup>*/}\n\n    </App>\n  );\n}\n","// Import React and ReactDOM\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\n// Import Framework7\nimport Framework7 from 'framework7/framework7.esm.bundle';\n\n// Import Framework7-React plugin\nimport Framework7React from 'framework7-react';\n\nimport * as Framework7Components from 'framework7-react';\n\n// Import main App component\nimport App from './components/App.jsx';\n\nimport Page from './components/Page.jsx';\n\nimport Flatpickr from './components/Flatpickr.jsx';\n\n// Framework7 styles\nimport 'framework7/css/framework7.min.css';\n\n// Icons\nimport './css/icons.css';\n\n// Custom app styles\nimport './css/app.css';\n\nimport * as OfflinePluginRuntime from 'offline-plugin/runtime';\n\nimport api from 'api';\n\nOfflinePluginRuntime.install({onInstalled: () => OfflinePluginRuntime.update(), onUpdateReady: () => window.tools ? api.globals.app.dialog.confirm('Update available, apply it?', () => OfflinePluginRuntime.applyUpdate(() => window.location.reload())) : OfflinePluginRuntime.applyUpdate(() => window.location.reload())});\n\n// Init Framework7-React plugin\nFramework7.use(Framework7React);\n\nwindow.React = React;\nwindow.ReactDOM = ReactDOM;\n\nwindow.rapydComponents = {...Framework7Components, ...window.rapydComponents, Page, Flatpickr};\n\n// Mount React App\n(async () => {\n  const wait_session = api.get_session();\n  try {\n    window.addEventListener('beforeinstallprompt', async (event) => {\n      event.preventDefault();\n      await wait_session;\n      api.globals.InstallPromp = event;\n      await api.wait_exist(() => document.getElementById('pwa_install_button'));\n      document.getElementById('pwa_install_button').style.display = 'inline-block';\n    });\n  }\n  catch (error) {\n    console.error(error);\n  }\n  await wait_session;\n  const tools = window.tools;\n  if (tools && (tools.configuration.long_name || tools.configuration.app_name)) document.querySelector('title').innerHTML = tools.configuration.long_name || tools.configuration.app_name;\n  await ReactDOM.render(\n    React.createElement(App),\n    document.getElementById('app'),\n  );\n  if (tools && tools.configuration.custom_navbar) {\n    var style = document.createElement('style');\n    style.innerHTML = '.navbar, .toolbar, .statusbar {background-color: ' + window.tools.configuration.custom_navbar + '!important}';\n    document.querySelector('head').append(style);\n  }\n  if (document.querySelector('div.navbar')) {\n    const color_element = document.createElement('meta');\n    color_element.name = 'theme-color';\n    color_element.content = '#' + getComputedStyle(document.querySelector('.navbar'), null).backgroundColor.replace('rgb(', '').replace(')', '').split(', ').map(function(c) {return parseInt(c).toString(16)}).map(function(hex) {return hex.length === 1 ? \"0\" + hex : hex}).join('');\n    document.querySelector('head').appendChild(color_element);\n    api.globals.registerManifest();\n  }\n})();\n","if (!window.ReactDOM) {\n  throw Error('ReactDOM must be defined on global variable');\n}\n\nmodule.exports = window.ReactDOM;\n"],"sourceRoot":""}